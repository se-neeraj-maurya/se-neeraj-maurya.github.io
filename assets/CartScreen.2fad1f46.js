import{k as $,r as z,u as A,c as k,o as F,n as r,t as g,s as n,f as o,q as t,Q as u,a7 as C,p as d,v as f,F as _,a9 as V,aq as D,ac as w,a8 as c,ad as b}from"./index.505fe819.js";import{Q as M,a as Q}from"./QCard.469fcc5b.js";import{Q as h}from"./QSeparator.3e1a0bb9.js";import{Q as O}from"./QImg.35b60f54.js";import{Q as R}from"./QCardActions.a72ca06a.js";import{N as E}from"./NoData.de08d5da.js";import{u as H}from"./cart-store.a2398e82.js";import"./use-dark.4febbc10.js";import"./axios.boot.60e72c0f.js";const L={class:"row items-center"},Y=t("div",{class:"text-h5 q-ml-md"},"My Cart",-1),j=t("div",{class:"tt-spacer"},null,-1),G={key:0,class:"q-mt-lg text-center"},J=t("p",{class:"text-center text-h5 q-py-xl"},"Your cart is empty",-1),K={class:"q-pa-md product-detail"},U=["onClick"],W={class:"title text-h6 text-grey-8 ellipsis"},X={class:"price text-body-1 q-mt-sm text-weight-medium"},Z={key:0,class:"gross-price text-body-1"},tt={key:0,class:"text-red"},et=t("div",{class:"tt-spacer"},null,-1),st={style:{width:"95px","min-width":"95px"},class:"q-pl-md row items-center"},at={class:"text-center text-h5",style:{width:"30px"}},ot={class:"q-mt-md"},it={class:"flex text-weight-medium q-py-sm q-px-md"},lt=t("div",null,"SubTotal",-1),ct=t("div",{class:"tt-spacer"},null,-1),rt=t("div",{class:"flex text-weight-medium q-py-sm q-px-md"},[t("div",null,"Shipping Charges"),t("div",{class:"tt-spacer"}),t("div",{class:"text-uppercase"},"Free")],-1),nt={class:"flex text-weight-medium text-red q-py-sm q-px-md"},dt=t("div",null,"Discount",-1),mt=t("div",{class:"tt-spacer"},null,-1),ut={class:"flex text-primary text-weight-bold text-h6 q-py-sm q-px-md"},pt=t("div",null,"Total",-1),_t=t("div",{class:"tt-spacer"},null,-1),ht=t("div",null,"Total Amount",-1),vt={class:"text-h5 text-weight-bold"},yt=t("div",{class:"tt-spacer"},null,-1),ft=t("span",{style:{"font-weight":"400","letter-spacing":"0.65px"},class:"q-mr-xs q-px-md text-capitalize"},"Order Now ",-1),St={__name:"CartScreen",setup(xt){const P=$(),i=H(),m=z([]),v=A(),I=()=>{v.push({name:"home"})},S=()=>{v.push({name:"home"})},p=k(()=>i.cartItems.reduce((a,s)=>(s.isPublished&&(a=a+s.sellPrice*s.quantity),a),0)),x=k(()=>i.cartItems.reduce((a,s)=>{if(s.isPublished){const e=s.comparePrice?s.comparePrice:s.sellPrice;a=a+e*s.quantity}return a},0)),N=async(a,s)=>{const e=--i.cartItems[s].quantity;if(i.cartItems[s].quantity<=0){q(a,s);return}else{const l={product_id:a.product_id,quantity:e};try{m.value[s]=!0,await i.updateCart(l)}finally{m.value[s]=!1}}},B=async(a,s)=>{if(a.stock==i.cartItems[s].quantity){P.notify({progress:!0,type:"negative",position:"top",message:`Only ${a.stock} items available.`,color:"red",timeout:2e3});return}const e=++i.cartItems[s].quantity,l={product_id:a.product_id,quantity:e};try{m.value[s]=!0,await i.updateCart(l)}finally{m.value[s]=!1}},q=async(a,s)=>{try{i.removeFromCart(a),i.cartItems.splice(s,1)}catch(e){console.log(e)}},T=()=>{v.replace({name:"order-confirmation"})};return F(()=>{i.fetchCartItem()}),(a,s)=>(r(),g(M,{flat:""},{default:n(()=>[o(Q,{class:"row items-center header-action-bar q-px-xs"},{default:n(()=>[t("div",L,[o(u,{round:"",unelevated:"",icon:"arrow_back",onClick:I}),Y]),j]),_:1}),o(h),C(i).cartItems.length==0?(r(),d("div",G,[o(E),J,o(u,{onClick:S,class:"q-px-xl",outline:"",color:"primary","no-caps":"",unelevated:"",rounded:""},{default:n(()=>[f(" Shop Now ")]),_:1})])):(r(),d(_,{key:1},[o(Q,{style:{height:"calc(100vh - 124px)"},class:"scroll q-pa-none"},{default:n(()=>[t("div",K,[(r(!0),d(_,null,V(C(i).cartItems,(e,l)=>(r(),d(_,{key:"product-key"+l},[t("div",{class:"cart-product items-center q-py-sm",onClick:D(y=>a.$emit("click:detail",e),["prevent","stop"])},[t("div",{style:{width:"60px"},class:w({"out-of-stock":!e.isPublished})},[o(O,{class:"rounded-borders product-thumbnail",style:{width:"60px"},src:e.thumbnail},null,8,["src"])],2),t("div",{class:w(["product-detail ellipsis q-pl-sm",{"out-of-stock":!e.isPublished}])},[t("div",W,c(e.name),1),t("div",X,[f(" \u20B9 "+c(e.sellPrice)+" / "+c(e.uomQty)+" "+c(e.uom)+" ",1),t("div",null,[e.comparePrice?(r(),d("span",Z," \u20B9 "+c(e.comparePrice),1)):b("",!0)])]),e.isPublished==0?(r(),d("div",tt," Sorry product is out of stock ")):b("",!0)],2),et,t("div",st,[e.isPublished==0?(r(),g(u,{key:0,color:"red",rounded:"",unelevated:"",size:"sm",onClick:y=>q(e,l)},{default:n(()=>[f("Remove")]),_:2},1032,["onClick"])):(r(),d(_,{key:1},[o(u,{color:"primary",round:"",unelevated:"",icon:"remove",size:"xs",loading:m.value[l],onClick:y=>N(e,l)},null,8,["loading","onClick"]),t("div",at,c(e.quantity),1),o(u,{color:"primary",round:"",unelevated:"",icon:"add",size:"xs",loading:m.value[l],onClick:y=>B(e,l)},null,8,["loading","onClick"])],64))])],8,U),o(h)],64))),128)),t("div",ot,[t("div",it,[lt,ct,t("div",null,"\u20B9 "+c(x.value),1)]),rt,t("div",nt,[dt,mt,t("div",null,"\u20B9 "+c(x.value-p.value),1)]),o(h),t("div",ut,[pt,_t,t("div",null,"\u20B9 "+c(p.value),1)])])])]),_:1}),o(h),o(R,{class:"q-mx-md"},{default:n(()=>[t("div",null,[ht,t("div",vt,"\u20B9 "+c(p.value),1)]),yt,o(u,{unelevated:"","no-caps":"",rounded:"",color:"primary",disabled:!p.value,onClick:T},{default:n(()=>[ft]),_:1},8,["disabled"])]),_:1})],64))]),_:1}))}};export{St as default};
