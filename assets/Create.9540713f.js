import{k as C,l as x,r as d,p as w,x as b,t as s,f as a,aw as Q,ax as m,s as o,Q as p,ay as k,aD as q,aF as V}from"./index.b415cf6e.js";import{Q as B}from"./QPage.58ee095e.js";import"./ImageUpload.vue_vue_type_style_index_0_scoped_true_lang.f42c15f4.js";import{I as F}from"./ImageGallery.54fecae9.js";import{u as I}from"./adminStore.8cd96c1e.js";import"./QCircularProgress.08935230.js";import"./format.2a3572e1.js";import"./QCardActions.a6f82528.js";const N={class:"row items-center"},S=o("div",{class:"text-h5 q-ml-md"},"New Category",-1),D=o("div",{class:"tt-spacer"},null,-1),R={class:"q-pa-md"},A={class:"q-mb-lg"},U={class:"text-center"},K=Object.assign({name:"CategoryCreate"},{__name:"Create",setup(j){const r=C(),g=I(),u=x(),i=d(),l=d(),c=d(),_=()=>{u.back()},y=e=>{l.value=e.url,console.log(e)},f=()=>{c.value.resetValidation()},v=()=>{c.value.validate().then(e=>{e&&l.value&&h()})},h=async()=>{const e=new FormData;e.append("title",i.value),e.append("description","description"),l.value&&e.append("image",l.value);try{r.loading.show({delay:100});const t=await g.CreateCategory(e);r.notify({progress:!0,position:"top",message:t.message,color:"green",timeout:2e3}),u.replace({name:"category-list"})}catch(t){r.notify({progress:!0,position:"top",message:t.data.message,color:"red",timeout:2e3})}finally{r.loading.hide()}};return(e,t)=>(w(),b(B,{class:"aa-category--page"},{default:s(()=>[a(Q,{unelevated:"",class:"aa-category-page"},{default:s(()=>[a(m,{class:"row items-center header-action-bar q-px-xs"},{default:s(()=>[o("div",N,[a(p,{round:"",unelevated:"",icon:"arrow_back",onClick:_}),S]),D]),_:1}),a(k),a(m,{style:{height:"calc(100vh - 66px)"},class:"scroll q-pa-none"},{default:s(()=>[a(q,{onSubmit:v,onReset:f,ref_key:"myForm",ref:c},{default:s(()=>[o("div",R,[a(V,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=n=>i.value=n),outlined:"",dense:"",placeholder:"Category Name",class:"q-mb-lg",rules:[n=>n&&n.length>0||"Category name is required"]},null,8,["modelValue","rules"]),o("div",A,[a(F,{onUpload:y})]),o("div",U,[a(p,{class:"full-width",unelevated:"",size:"16px",color:"primary",type:"submit",style:{width:"140px"},label:"Add Category"})])])]),_:1},512)]),_:1})]),_:1})]),_:1}))}});export{K as default};
