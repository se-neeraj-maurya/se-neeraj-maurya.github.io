import{k as B,l as I,m as N,r as n,o as L,p as v,x as M,t as i,f as s,aw as R,ax as f,s as a,Q as y,ag as p,ay as z,aD as A,aF as r,af as D,b6 as F,b7 as G,ac as O,v as P,q as j,al as K}from"./index.30e7e525.js";import{Q as T,a as _}from"./QItem.b2d5de41.js";import{Q as h,a as q}from"./QSelect.6c6eb8fb.js";import{Q as $}from"./QToggle.5c041d7a.js";import{Q as E}from"./QPage.16171947.js";import{I as W}from"./ImageGallery.18b0e9c8.js";import{u as H}from"./adminStore.72e89a93.js";import"./QChip.38886a94.js";import"./QMenu.00d34411.js";import"./selection.1286e7d7.js";import"./rtl.b51694b1.js";import"./format.2a3572e1.js";import"./option-sizes.4140cb79.js";import"./QCardActions.8192f1d3.js";const J={class:"row items-center"},X={class:"text-h5 q-ml-md"},Y=a("div",{class:"tt-spacer"},null,-1),Z={class:"q-pa-md product-detail"},ee=a("label",{class:"q-label"},"Product Name",-1),te=a("label",{class:"q-label"},"Description",-1),le=a("label",{class:"q-label"},"Category ",-1),oe={class:"row q-gutter"},se={class:"col-6 q-pr-sm"},ae=a("label",{class:"q-label"},"Stock",-1),ie={class:"col-6 q-pl-sm"},re=a("label",{class:"q-label"},"Unit",-1),ue={class:"row q-gutter"},de={class:"col-6 q-pr-sm"},ne=a("label",{class:"q-label"},"Cost Price",-1),ce={class:"col-6 q-pl-sm"},me=a("label",{class:"q-label"},"Sell Price",-1),pe={class:"col-6 q-pr-sm"},ge=a("label",{class:"q-label"},"Compare Price",-1),be={key:0,class:"q-mb-lg"},ve={class:"text-center"},Ie=Object.assign({name:"ProductCreateOrUpdate"},{__name:"CreateOrUpdate",setup(fe){const c=H(),d=B(),g=I(),b=N(),m=n(),V=n([{unit:"piece",title:"Piece",description:"Individual items, e.g., clothing, electronics, makeup"},{unit:"pack",title:"Pack",description:"Multiple items sold together, e.g., batteries, stationery, notebooks"},{unit:"set",title:"Set",description:"Bundled items sold as a group, e.g., kitchenware, tools, furniture"},{unit:"KG",title:"Kilogram",abbreviation:"kg",description:"Weight-based products, e.g., fruits, grains"},{unit:"g",title:"Gram",abbreviation:"g",description:"Smaller weight-based items, e.g., spices, snacks"},{unit:"L",title:"Liter",abbreviation:"L",description:"Liquids measured by volume, e.g., milk, juice"},{unit:"ml",title:"Milliliter",abbreviation:"ml",description:"Small quantities of liquids, e.g., syrups, cosmetics"},{unit:"carton",title:"Carton",description:"Bulk items, e.g., canned goods, beverages"},{unit:"pair",title:"Pair",description:"Items sold in pairs, e.g., shoes, socks"},{unit:"size",title:"Size",description:"Sizing units for clothing, e.g., Small, Medium, Large"},{unit:"box",title:"Box",description:"Bundles or sets of electronics, e.g., camera sets, home theater systems"},{unit:"bottle",title:"Bottle",description:"Liquid or cream-based products, e.g., lotions, foundations"},{unit:"compact",title:"Compact",description:"Pressed powders or similar cosmetic products"}]),k=c.categories,u=n(),o=n({name:null,description:null,sku:null,uomQty:1,uom:"kg",barcode:null,category:null,costPrice:null,sellPrice:null,comparePrice:null,stock:null,discount:null,isPublished:!1,images:[]}),Q=()=>{m.value.resetValidation()},S=t=>{t&&Array.isArray(t)&&(o.value.images=t.map(l=>l.url))},w=()=>{g.back()},x=()=>{m.value.validate().then(t=>{if(!u.value&&!o.value.images.length){d.notify({progress:!0,type:"negative",position:"top",message:"Product image is required.",color:"red",timeout:2e3});return}t&&C()})},C=async()=>{try{const t=o.value;d.loading.show({delay:100});const l=await c.CreateUpdateProduct(t);d.notify({progress:!0,type:"positive",position:"top",message:l.message,color:"green",timeout:2e3}),g.replace({name:"product-list"})}catch(t){d.notify({progress:!0,position:"top",type:"negative",message:t.data.message,color:"red",timeout:2e3})}finally{d.loading.hide()}},U=async()=>{try{const t=await c.FetchSingleProduct(u.value),l={id:t.data.id,name:t.data.name,description:t.data.description,sku:t.data.sku,uom:t.data.uom,uomQty:t.data.uomQty,category:t.data.category,costPrice:t.data.costPrice,sellPrice:t.data.sellPrice,comparePrice:t.data.comparePrice,stock:t.data.stock,isPublished:t.data.isPublished,discount:t.data.discount,images:[]};o.value=l}catch(t){console.log(t)}};return L(()=>{b.name=="product-update"&&(u.value=b.params.id,U())}),(t,l)=>(v(),M(E,{class:"product-page"},{default:i(()=>[s(R,{unelevated:"",class:"aa-product-page"},{default:i(()=>[s(f,{class:"row items-center header-action-bar q-px-xs"},{default:i(()=>[a("div",J,[s(y,{round:"",unelevated:"",icon:"arrow_back",onClick:w}),a("div",X,p(u.value?"Update":"Add New")+" Product ",1)]),Y]),_:1}),s(z),s(f,{style:{height:"calc(100vh - 66px)"},class:"scroll q-pa-none"},{default:i(()=>[s(A,{onSubmit:x,onReset:Q,ref_key:"myForm",ref:m},{default:i(()=>[a("div",Z,[a("div",null,[ee,s(r,{modelValue:o.value.name,"onUpdate:modelValue":l[0]||(l[0]=e=>o.value.name=e),outlined:"",dense:"",placeholder:"Product Name",class:"q-mb-sm",rules:[e=>e&&e.length>0||"Product name is required"]},null,8,["modelValue","rules"])]),te,s(r,{type:"textarea",modelValue:o.value.description,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value.description=e),outlined:"",dense:"",placeholder:"Product Description",class:"q-mb-lg"},null,8,["modelValue"]),le,s(h,{modelValue:o.value.category,"onUpdate:modelValue":l[2]||(l[2]=e=>o.value.category=e),options:D(k),"option-value":"title","option-label":"title","emit-value":"",outlined:"",dense:"",placeholder:"Category",class:"q-mb-lg"},{option:i(e=>[s(T,F(G(e.itemProps)),{default:i(()=>[s(_,{avatar:""},{default:i(()=>[s(O,{src:e.opt.image},null,8,["src"])]),_:2},1024),s(_,null,{default:i(()=>[s(q,null,{default:i(()=>[P(p(e.opt.title),1)]),_:2},1024),s(q,{caption:""},{default:i(()=>[P(p(e.opt.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"]),a("div",oe,[a("div",se,[ae,s(r,{type:"number",modelValue:o.value.stock,"onUpdate:modelValue":l[3]||(l[3]=e=>o.value.stock=e),modelModifiers:{number:!0},outlined:"",dense:"",placeholder:"Stock",class:"q-mb-lg"},null,8,["modelValue"])]),a("div",ie,[re,s(r,{modelValue:o.value.uomQty,"onUpdate:modelValue":l[5]||(l[5]=e=>o.value.uomQty=e),modelModifiers:{number:!0},outlined:"",dense:"",mask:"####",class:"q-mb-lg hide-spin",rules:[e=>e&&Number(e)>0||"Required"]},{after:i(()=>[s(h,{borderless:"",style:{width:"80px"},modelValue:o.value.uom,"onUpdate:modelValue":l[4]||(l[4]=e=>o.value.uom=e),options:V.value,"option-value":"unit","option-label":"title","options-dense":"",outlined:"","emit-value":"",dense:"",class:"ellipsis"},null,8,["modelValue","options"])]),_:1},8,["modelValue","rules"])])]),a("div",ue,[a("div",de,[ne,s(r,{type:"number",modelValue:o.value.costPrice,"onUpdate:modelValue":l[6]||(l[6]=e=>o.value.costPrice=e),modelModifiers:{number:!0},outlined:"",dense:"",placeholder:"Cost Price",rules:[e=>e&&Number(e)>0||"Cost price is required"]},null,8,["modelValue","rules"])]),a("div",ce,[me,s(r,{type:"number",modelValue:o.value.sellPrice,"onUpdate:modelValue":l[7]||(l[7]=e=>o.value.sellPrice=e),modelModifiers:{number:!0},outlined:"",dense:"",placeholder:"Sell Price",rules:[e=>e&&Number(e)>0||"Sell price is required"]},null,8,["modelValue","rules"])]),a("div",pe,[ge,s(r,{type:"number",modelValue:o.value.comparePrice,"onUpdate:modelValue":l[8]||(l[8]=e=>o.value.comparePrice=e),modelModifiers:{number:!0},outlined:"",dense:"",placeholder:"Compare Price"},null,8,["modelValue"])])]),s($,{class:"q-mb-lg",modelValue:o.value.isPublished,"onUpdate:modelValue":l[9]||(l[9]=e=>o.value.isPublished=e),label:"Published"},null,8,["modelValue"]),u.value?K("",!0):(v(),j("div",be,[s(W,{multiple:"",onUpload:S})])),a("div",ve,[s(y,{class:"full-width",unelevated:"",size:"16px",color:"primary",type:"submit",style:{width:"140px"},label:`${u.value?"Update":"Add"} Product`},null,8,["label"])])])]),_:1},512)]),_:1})]),_:1})]),_:1}))}});export{Ie as default};
