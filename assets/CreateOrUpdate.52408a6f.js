import{k as B,u as I,l as N,r as n,o as L,n as v,t as M,s as i,f as l,q as a,Q as f,a5 as p,a4 as R,aU as z,aV as A,v as y,p as D,aa as F}from"./index.ca18b857.js";import{a as _,Q as G}from"./QCard.666a478f.js";import{Q as O}from"./QSeparator.057da623.js";import{Q as u}from"./QInput.036c0937.js";import{Q as j}from"./QImg.798e1b05.js";import{Q as K,a as h}from"./QItem.2ae4ff01.js";import{Q as P,a as q}from"./QSelect.0d9a3e74.js";import{Q as T}from"./QToggle.2bc72f1e.js";import{Q as $}from"./QForm.b209e325.js";import{Q as E}from"./QPage.e517f169.js";import{I as W}from"./ImageGallery.2225db57.js";import{u as H}from"./adminStore.83ff5bcd.js";import"./use-dark.a45bcb7e.js";import"./uid.42677368.js";import"./focus-manager.02955f48.js";import"./use-form.28b1da5b.js";import"./QChip.27f1e5f0.js";import"./QMenu.0dfeac13.js";import"./selection.fc2c0b66.js";import"./QDialog.d6997b78.js";import"./rtl.b51694b1.js";import"./format.2a3572e1.js";import"./option-sizes.f75f0360.js";import"./QCardActions.fe56fa5e.js";import"./axios.boot.7a4caa9b.js";const J={class:"row items-center"},X={class:"text-h5 q-ml-md"},Y=a("div",{class:"tt-spacer"},null,-1),Z={class:"q-pa-md product-detail"},ee=a("label",{class:"q-label"},"Product Name",-1),te=a("label",{class:"q-label"},"Description",-1),oe=a("label",{class:"q-label"},"Category ",-1),le={class:"row q-gutter"},se={class:"col-6 q-pr-sm"},ae=a("label",{class:"q-label"},"Stock",-1),ie={class:"col-6 q-pl-sm"},re=a("label",{class:"q-label"},"Unit",-1),ue={class:"row q-gutter"},de={class:"col-6 q-pr-sm"},ne=a("label",{class:"q-label"},"Cost Price",-1),ce={class:"col-6 q-pl-sm"},me=a("label",{class:"q-label"},"Sell Price",-1),pe={key:0,class:"q-mb-lg"},ge={class:"text-center"},Ge=Object.assign({name:"ProductCreateOrUpdate"},{__name:"CreateOrUpdate",setup(be){const c=H(),d=B(),g=I(),b=N(),m=n(),V=n([{unit:"piece",title:"Piece",description:"Individual items, e.g., clothing, electronics, makeup"},{unit:"pack",title:"Pack",description:"Multiple items sold together, e.g., batteries, stationery, notebooks"},{unit:"set",title:"Set",description:"Bundled items sold as a group, e.g., kitchenware, tools, furniture"},{unit:"KG",title:"Kilogram",abbreviation:"kg",description:"Weight-based products, e.g., fruits, grains"},{unit:"g",title:"Gram",abbreviation:"g",description:"Smaller weight-based items, e.g., spices, snacks"},{unit:"L",title:"Liter",abbreviation:"L",description:"Liquids measured by volume, e.g., milk, juice"},{unit:"ml",title:"Milliliter",abbreviation:"ml",description:"Small quantities of liquids, e.g., syrups, cosmetics"},{unit:"carton",title:"Carton",description:"Bulk items, e.g., canned goods, beverages"},{unit:"pair",title:"Pair",description:"Items sold in pairs, e.g., shoes, socks"},{unit:"size",title:"Size",description:"Sizing units for clothing, e.g., Small, Medium, Large"},{unit:"box",title:"Box",description:"Bundles or sets of electronics, e.g., camera sets, home theater systems"},{unit:"bottle",title:"Bottle",description:"Liquid or cream-based products, e.g., lotions, foundations"},{unit:"compact",title:"Compact",description:"Pressed powders or similar cosmetic products"}]),k=c.categories,r=n(),s=n({name:null,description:null,sku:null,uomQty:1,uom:"kg",barcode:null,category:null,costPrice:null,sellPrice:null,stock:null,isPublished:!1,images:[]}),Q=()=>{m.value.resetValidation()},S=t=>{t&&Array.isArray(t)&&(s.value.images=t.map(o=>o.url))},w=()=>{g.back()},U=()=>{m.value.validate().then(t=>{if(!r.value&&!s.value.images.length){d.notify({progress:!0,type:"negative",position:"top",message:"Product image is required.",color:"red",timeout:2e3});return}t&&x()})},x=async()=>{try{const t=s.value;d.loading.show({delay:100});const o=await c.CreateUpdateProduct(t);d.notify({progress:!0,type:"positive",position:"top",message:o.message,color:"green",timeout:2e3}),g.replace({name:"product-list"})}catch(t){d.notify({progress:!0,position:"top",type:"negative",message:t.data.message,color:"red",timeout:2e3})}finally{d.loading.hide()}},C=async()=>{try{const t=await c.FetchSingleProduct(r.value),o={id:t.data.id,name:t.data.name,description:t.data.description,sku:t.data.sku,uom:t.data.uom,uomQty:t.data.uomQty,category:t.data.category,costPrice:t.data.costPrice,sellPrice:t.data.sellPrice,stock:t.data.stock,isPublished:t.data.isPublished,images:[]};s.value=o}catch(t){console.log(t)}};return L(()=>{b.name=="product-update"&&(r.value=b.params.id,C())}),(t,o)=>(v(),M(E,{class:"product-page"},{default:i(()=>[l(G,{unelevated:"",class:"aa-product-page"},{default:i(()=>[l(_,{class:"row items-center header-action-bar q-px-xs"},{default:i(()=>[a("div",J,[l(f,{round:"",unelevated:"",icon:"arrow_back",onClick:w}),a("div",X,p(r.value?"Update":"Add New")+" Product ",1)]),Y]),_:1}),l(O),l(_,{style:{height:"calc(100vh - 66px)"},class:"scroll q-pa-none"},{default:i(()=>[l($,{onSubmit:U,onReset:Q,ref_key:"myForm",ref:m},{default:i(()=>[a("div",Z,[a("div",null,[ee,l(u,{modelValue:s.value.name,"onUpdate:modelValue":o[0]||(o[0]=e=>s.value.name=e),outlined:"",dense:"",placeholder:"Product Name",class:"q-mb-sm",rules:[e=>e&&e.length>0||"Product name is required"]},null,8,["modelValue","rules"])]),te,l(u,{type:"textarea",modelValue:s.value.description,"onUpdate:modelValue":o[1]||(o[1]=e=>s.value.description=e),outlined:"",dense:"",placeholder:"Product Description",class:"q-mb-lg"},null,8,["modelValue"]),oe,l(P,{modelValue:s.value.category,"onUpdate:modelValue":o[2]||(o[2]=e=>s.value.category=e),options:R(k),"option-value":"title","option-label":"title","emit-value":"",outlined:"",dense:"",placeholder:"Category",class:"q-mb-lg"},{option:i(e=>[l(K,z(A(e.itemProps)),{default:i(()=>[l(h,{avatar:""},{default:i(()=>[l(j,{src:e.opt.image},null,8,["src"])]),_:2},1024),l(h,null,{default:i(()=>[l(q,null,{default:i(()=>[y(p(e.opt.title),1)]),_:2},1024),l(q,{caption:""},{default:i(()=>[y(p(e.opt.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"]),a("div",le,[a("div",se,[ae,l(u,{type:"number",modelValue:s.value.stock,"onUpdate:modelValue":o[3]||(o[3]=e=>s.value.stock=e),modelModifiers:{number:!0},outlined:"",dense:"",placeholder:"Stock",class:"q-mb-lg"},null,8,["modelValue"])]),a("div",ie,[re,l(u,{modelValue:s.value.uomQty,"onUpdate:modelValue":o[5]||(o[5]=e=>s.value.uomQty=e),modelModifiers:{number:!0},outlined:"",dense:"",mask:"####",class:"q-mb-lg hide-spin",rules:[e=>e&&Number(e)>0||"Required"]},{after:i(()=>[l(P,{borderless:"",style:{width:"80px"},modelValue:s.value.uom,"onUpdate:modelValue":o[4]||(o[4]=e=>s.value.uom=e),options:V.value,"option-value":"unit","option-label":"title","options-dense":"",outlined:"","emit-value":"",dense:"",class:"ellipsis"},null,8,["modelValue","options"])]),_:1},8,["modelValue","rules"])])]),a("div",ue,[a("div",de,[ne,l(u,{type:"number",modelValue:s.value.costPrice,"onUpdate:modelValue":o[6]||(o[6]=e=>s.value.costPrice=e),modelModifiers:{number:!0},outlined:"",dense:"",placeholder:"Cost Price",rules:[e=>e&&Number(e)>0||"Cost price is required"]},null,8,["modelValue","rules"])]),a("div",ce,[me,l(u,{type:"number",modelValue:s.value.sellPrice,"onUpdate:modelValue":o[7]||(o[7]=e=>s.value.sellPrice=e),modelModifiers:{number:!0},outlined:"",dense:"",placeholder:"Sell Price",rules:[e=>e&&Number(e)>0||"Sell price is required"]},null,8,["modelValue","rules"])])]),l(T,{class:"q-mb-lg",modelValue:s.value.isPublished,"onUpdate:modelValue":o[8]||(o[8]=e=>s.value.isPublished=e),label:"Published"},null,8,["modelValue"]),r.value?F("",!0):(v(),D("div",pe,[l(W,{multiple:"",onUpload:S})])),a("div",ge,[l(f,{class:"full-width",unelevated:"",size:"16px",color:"primary",type:"submit",style:{width:"140px"},label:`${r.value?"Update":"Add"} Product`},null,8,["label"])])])]),_:1},512)]),_:1})]),_:1})]),_:1}))}});export{Ge as default};
