import{k as B,u as I,l as N,r as n,o as L,n as v,t as M,s as i,f as s,q as a,Q as f,a7 as p,a6 as D,aW as R,aX as z,v as y,p as A,ac as F}from"./index.5dbc4d9f.js";import{a as _,Q as G}from"./QCard.2022731b.js";import{Q as O}from"./QSeparator.534aecfa.js";import{Q as r}from"./QInput.950ed05b.js";import{Q as j}from"./QImg.daf9590e.js";import{Q as K,a as h}from"./QItem.8c4d6b3d.js";import{Q as P,a as q}from"./QSelect.cbda8094.js";import{Q as T}from"./QToggle.f8302e1d.js";import{Q as W}from"./QForm.a5275264.js";import{Q as $}from"./QPage.04ad7494.js";import{I as E}from"./ImageGallery.c075be5d.js";import{u as X}from"./adminStore.0570ef5d.js";import"./use-dark.a1b71146.js";import"./uid.42677368.js";import"./focus-manager.02955f48.js";import"./use-form.f625a164.js";import"./QChip.b1322030.js";import"./QMenu.93e28b33.js";import"./selection.70b38d61.js";import"./QDialog.2b67d994.js";import"./rtl.b51694b1.js";import"./format.2a3572e1.js";import"./option-sizes.b8a6ec60.js";import"./QCardActions.2a57d5fd.js";import"./axios.boot.ea71beab.js";const H={class:"row items-center"},J={class:"text-h5 q-ml-md"},Y=a("div",{class:"tt-spacer"},null,-1),Z={class:"q-pa-md product-detail"},ee=a("label",{class:"q-label"},"Product Name",-1),te=a("label",{class:"q-label"},"Description",-1),oe=a("label",{class:"q-label"},"Category ",-1),le={class:"row q-gutter"},se={class:"col-6 q-pr-sm"},ae=a("label",{class:"q-label"},"Stock",-1),ie={class:"col-6 q-pl-sm"},re=a("label",{class:"q-label"},"Unit",-1),ue={class:"row q-gutter"},de={class:"col-6 q-pr-sm"},ne=a("label",{class:"q-label"},"Cost Price",-1),ce={class:"col-6 q-pl-sm"},me=a("label",{class:"q-label"},"Sell Price",-1),pe={class:"col-6 q-pr-sm"},ge=a("label",{class:"q-label"},"Discount",-1),be={key:0,class:"q-mb-lg"},ve={class:"text-center"},je=Object.assign({name:"ProductCreateOrUpdate"},{__name:"CreateOrUpdate",setup(fe){const c=X(),d=B(),g=I(),b=N(),m=n(),V=n([{unit:"piece",title:"Piece",description:"Individual items, e.g., clothing, electronics, makeup"},{unit:"pack",title:"Pack",description:"Multiple items sold together, e.g., batteries, stationery, notebooks"},{unit:"set",title:"Set",description:"Bundled items sold as a group, e.g., kitchenware, tools, furniture"},{unit:"KG",title:"Kilogram",abbreviation:"kg",description:"Weight-based products, e.g., fruits, grains"},{unit:"g",title:"Gram",abbreviation:"g",description:"Smaller weight-based items, e.g., spices, snacks"},{unit:"L",title:"Liter",abbreviation:"L",description:"Liquids measured by volume, e.g., milk, juice"},{unit:"ml",title:"Milliliter",abbreviation:"ml",description:"Small quantities of liquids, e.g., syrups, cosmetics"},{unit:"carton",title:"Carton",description:"Bulk items, e.g., canned goods, beverages"},{unit:"pair",title:"Pair",description:"Items sold in pairs, e.g., shoes, socks"},{unit:"size",title:"Size",description:"Sizing units for clothing, e.g., Small, Medium, Large"},{unit:"box",title:"Box",description:"Bundles or sets of electronics, e.g., camera sets, home theater systems"},{unit:"bottle",title:"Bottle",description:"Liquid or cream-based products, e.g., lotions, foundations"},{unit:"compact",title:"Compact",description:"Pressed powders or similar cosmetic products"}]),k=c.categories,u=n(),l=n({name:null,description:null,sku:null,uomQty:1,uom:"kg",barcode:null,category:null,costPrice:null,sellPrice:null,stock:null,discount:null,isPublished:!1,images:[]}),Q=()=>{m.value.resetValidation()},S=o=>{o&&Array.isArray(o)&&(l.value.images=o.map(t=>t.url))},w=()=>{g.back()},U=()=>{m.value.validate().then(o=>{if(!u.value&&!l.value.images.length){d.notify({progress:!0,type:"negative",position:"top",message:"Product image is required.",color:"red",timeout:2e3});return}o&&x()})},x=async()=>{try{const o=l.value;d.loading.show({delay:100});const t=await c.CreateUpdateProduct(o);d.notify({progress:!0,type:"positive",position:"top",message:t.message,color:"green",timeout:2e3}),g.replace({name:"product-list"})}catch(o){d.notify({progress:!0,position:"top",type:"negative",message:o.data.message,color:"red",timeout:2e3})}finally{d.loading.hide()}},C=async()=>{try{const o=await c.FetchSingleProduct(u.value),t={id:o.data.id,name:o.data.name,description:o.data.description,sku:o.data.sku,uom:o.data.uom,uomQty:o.data.uomQty,category:o.data.category,costPrice:o.data.costPrice,sellPrice:o.data.sellPrice,stock:o.data.stock,isPublished:o.data.isPublished,discount:o.data.discount,images:[]};l.value=t}catch(o){console.log(o)}};return L(()=>{b.name=="product-update"&&(u.value=b.params.id,C())}),(o,t)=>(v(),M($,{class:"product-page"},{default:i(()=>[s(G,{unelevated:"",class:"aa-product-page"},{default:i(()=>[s(_,{class:"row items-center header-action-bar q-px-xs"},{default:i(()=>[a("div",H,[s(f,{round:"",unelevated:"",icon:"arrow_back",onClick:w}),a("div",J,p(u.value?"Update":"Add New")+" Product ",1)]),Y]),_:1}),s(O),s(_,{style:{height:"calc(100vh - 66px)"},class:"scroll q-pa-none"},{default:i(()=>[s(W,{onSubmit:U,onReset:Q,ref_key:"myForm",ref:m},{default:i(()=>[a("div",Z,[a("div",null,[ee,s(r,{modelValue:l.value.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value.name=e),outlined:"",dense:"",placeholder:"Product Name",class:"q-mb-sm",rules:[e=>e&&e.length>0||"Product name is required"]},null,8,["modelValue","rules"])]),te,s(r,{type:"textarea",modelValue:l.value.description,"onUpdate:modelValue":t[1]||(t[1]=e=>l.value.description=e),outlined:"",dense:"",placeholder:"Product Description",class:"q-mb-lg"},null,8,["modelValue"]),oe,s(P,{modelValue:l.value.category,"onUpdate:modelValue":t[2]||(t[2]=e=>l.value.category=e),options:D(k),"option-value":"title","option-label":"title","emit-value":"",outlined:"",dense:"",placeholder:"Category",class:"q-mb-lg"},{option:i(e=>[s(K,R(z(e.itemProps)),{default:i(()=>[s(h,{avatar:""},{default:i(()=>[s(j,{src:e.opt.image},null,8,["src"])]),_:2},1024),s(h,null,{default:i(()=>[s(q,null,{default:i(()=>[y(p(e.opt.title),1)]),_:2},1024),s(q,{caption:""},{default:i(()=>[y(p(e.opt.description),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"]),a("div",le,[a("div",se,[ae,s(r,{type:"number",modelValue:l.value.stock,"onUpdate:modelValue":t[3]||(t[3]=e=>l.value.stock=e),modelModifiers:{number:!0},outlined:"",dense:"",placeholder:"Stock",class:"q-mb-lg"},null,8,["modelValue"])]),a("div",ie,[re,s(r,{modelValue:l.value.uomQty,"onUpdate:modelValue":t[5]||(t[5]=e=>l.value.uomQty=e),modelModifiers:{number:!0},outlined:"",dense:"",mask:"####",class:"q-mb-lg hide-spin",rules:[e=>e&&Number(e)>0||"Required"]},{after:i(()=>[s(P,{borderless:"",style:{width:"80px"},modelValue:l.value.uom,"onUpdate:modelValue":t[4]||(t[4]=e=>l.value.uom=e),options:V.value,"option-value":"unit","option-label":"title","options-dense":"",outlined:"","emit-value":"",dense:"",class:"ellipsis"},null,8,["modelValue","options"])]),_:1},8,["modelValue","rules"])])]),a("div",ue,[a("div",de,[ne,s(r,{type:"number",modelValue:l.value.costPrice,"onUpdate:modelValue":t[6]||(t[6]=e=>l.value.costPrice=e),modelModifiers:{number:!0},outlined:"",dense:"",placeholder:"Cost Price",rules:[e=>e&&Number(e)>0||"Cost price is required"]},null,8,["modelValue","rules"])]),a("div",ce,[me,s(r,{type:"number",modelValue:l.value.sellPrice,"onUpdate:modelValue":t[7]||(t[7]=e=>l.value.sellPrice=e),modelModifiers:{number:!0},outlined:"",dense:"",placeholder:"Sell Price",rules:[e=>e&&Number(e)>0||"Sell price is required"]},null,8,["modelValue","rules"])]),a("div",pe,[ge,s(r,{type:"number",modelValue:l.value.discount,"onUpdate:modelValue":t[8]||(t[8]=e=>l.value.discount=e),modelModifiers:{number:!0},outlined:"",dense:"",placeholder:"Discount"},null,8,["modelValue"])])]),s(T,{class:"q-mb-lg",modelValue:l.value.isPublished,"onUpdate:modelValue":t[9]||(t[9]=e=>l.value.isPublished=e),label:"Published"},null,8,["modelValue"]),u.value?F("",!0):(v(),A("div",be,[s(E,{multiple:"",onUpload:S})])),a("div",ve,[s(f,{class:"full-width",unelevated:"",size:"16px",color:"primary",type:"submit",style:{width:"140px"},label:`${u.value?"Update":"Add"} Product`},null,8,["label"])])])]),_:1},512)]),_:1})]),_:1})]),_:1}))}});export{je as default};
