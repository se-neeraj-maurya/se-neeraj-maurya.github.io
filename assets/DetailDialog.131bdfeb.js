import{Q as _}from"./QSkeleton.bebac386.js";import{av as $,u as z,r as h,l as E,c as C,o as L,p as o,x as n,t as l,f as r,aw as R,ax as T,s as i,q as d,F as S,ah as j,ac as F,ag as c,v as g,al as Q,af as x,Q as f,ay as G,az as O,aA as W,aB as M,aC as H}from"./index.30e7e525.js";import{Q as J,a as K}from"./QCarousel.32c482ce.js";import{u as X}from"./globalStore.339de122.js";import{u as Y}from"./cart-store.4d134f49.js";const D=u=>(M("data-v-59c05f84"),u=u(),H(),u),Z={key:0,class:"q-pa-md"},ee={key:1,class:"q-pa-md product-detail"},te={class:""},ae={class:"text-h5 text-weight-medium q-mt-sm"},oe={class:"text- text-grey-8 q-mt-sm"},se={class:"flex item-center q-my-md"},le={class:"text-h6"},ie={key:0,class:"gross-price q-pl-sm"},re=D(()=>i("div",{class:"tt-spacer"},null,-1)),ne={key:0,class:"q-mt-sm"},de={class:"q-mx-md q-py-md",align:"center"},ce=D(()=>i("span",{class:"q-ml-md"}," Share On WhatsApp ",-1)),ue={__name:"DetailDialog",setup(u){const p=X(),w=z(),k=Y(),m=h(!1),q=E(),v=h(!1),y=h(),e=h({}),I=C(()=>e.value&&e.value.images?e.value.images.map(a=>a.file_path):[]),b=C(()=>!!k.cartItems.find(t=>t.product_id==e.value.id)),V=async()=>{const a={product_id:e.value.id,quantity:1};try{v.value=!0;const t=W(e.value);await k.addToCart(a,t)}finally{v.value=!1}},B=()=>{q.push({name:"my-cart"})},P=async()=>{m.value=!0;try{const a=await p.fetchSingleProduct(p.product.id);e.value=a.data,y.value=e.value.images[0].file_path}catch(a){console.log(a)}finally{m.value=!1}},U=a=>{const t=q.resolve({name:"whatsapp-share",params:{id:a.id}});console.log(t.href,"|||||||"),console.log(window.location.origin);const s=`${window.location.origin}/${t.href}`,N=`https://api.whatsapp.com/send?text=${encodeURIComponent(s)}`;window.open(N,"_blank")},A=a=>{w.BuyProduct(a)};return L(()=>{P()}),(a,t)=>(o(),n(O,{modelValue:x(p).detailDialog,"onUpdate:modelValue":t[3]||(t[3]=s=>x(p).detailDialog=s),position:"bottom","full-height":"",maximized:"",class:"tt-full-width tt-product-detail"},{default:l(()=>[r(R,null,{default:l(()=>[r(T,{style:{"max-height":"90vh","min-height":"60vh"},class:"scroll q-pa-none"},{default:l(()=>[i("div",null,[m.value?(o(),n(_,{key:0,height:"200px",square:""})):(o(),n(J,{key:1,modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=s=>y.value=s),"transition-prev":"jump-right","transition-next":"jump-left",swipeable:"",animated:"","control-color":"white","prev-icon":"arrow_left","next-icon":"arrow_right",navigation:"",infinite:"","keep-alive":"",autoplay:2e3,class:"detail-carousel"},{default:l(()=>[(o(!0),d(S,null,j(I.value,s=>(o(),n(K,{key:s,name:s},{default:l(()=>[r(F,{class:"rounded-borders",fit:"contain",src:s,loading:"lazy","spinner-color":"white",height:"200px"},null,8,["src"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]))]),m.value?(o(),d("div",Z,[r(_,{type:"text",class:"text-subtitle1"}),r(_,{type:"text",class:"text-subtitle1"}),r(_,{type:"text",class:"text-subtitle1"})])):(o(),d("div",ee,[i("div",te,[i("div",ae,c(e.value.name),1),i("div",oe,c(e.value.uomQty)+" "+c(e.value.uom),1)]),i("div",se,[i("div",le,[g(" \u20B9 "+c(e.value.sellPrice)+" ",1),e.value.comparePrice?(o(),d("span",ie," \u20B9 "+c(e.value.comparePrice),1)):Q("",!0)]),re,x(w).isLoggedIn?(o(),d(S,{key:0},[b.value?(o(),n(f,{key:0,unelevated:"",rounded:"",outline:"",class:"q-px-lg",color:"primary",onClick:B},{default:l(()=>[g(" Go to Cart ")]),_:1})):(o(),n(f,{key:1,class:"q-px-lg",rounded:"",unelevated:"",outline:"",color:"primary",onClick:V,loading:v.value},{default:l(()=>[g(" Add to cart ")]),_:1},8,["loading"]))],64)):(o(),n(f,{key:1,class:"q-px-lg",rounded:"",unelevated:"",color:"primary",onClick:t[1]||(t[1]=s=>A(e.value)),loading:v.value},{default:l(()=>[g(" Buy Now ")]),_:1},8,["loading"]))]),e.value.description?(o(),d("p",ne,c(e.value.description),1)):Q("",!0)]))]),_:1}),r(G),i("div",de,[r(f,{unelevated:"",rounded:"",outline:"",class:"q-px-lg",color:"primary",icon:"mdi-whatsapp",onClick:t[2]||(t[2]=s=>U(e.value))},{default:l(()=>[ce]),_:1})])]),_:1})]),_:1},8,["modelValue"]))}};var ge=$(ue,[["__scopeId","data-v-59c05f84"]]);export{ge as D};
