import{Q as v}from"./QSkeleton.47cad92d.js";import{Q as P}from"./QImg.b37dc4f1.js";import{Q as N,a as $}from"./QCarousel.a795d44a.js";import{am as A,r as _,u as E,c as k,o as R,n as o,t as n,s as r,f as i,q as l,p as d,F as T,a9 as j,a8 as c,v as g,ad as q,Q as y,a7 as Q,an as z,ao as F,ap as G}from"./index.19c34057.js";import{Q as L,a as O}from"./QCard.51e3b46a.js";import{Q as W}from"./QSeparator.878efa33.js";import{Q as M}from"./QDialog.04c0b3f2.js";import{u as H}from"./globalStore.21983f4e.js";import{u as J}from"./cart-store.0444f8d2.js";const C=u=>(F("data-v-146e7642"),u=u(),G(),u),K={key:0,class:"q-pa-md"},X={key:1,class:"q-pa-md product-detail"},Y={class:""},Z={class:"text-h5 text-weight-medium q-mt-sm"},ee={class:"text- text-grey-8 q-mt-sm"},te={class:"flex item-center q-my-md"},ae={class:"text-h6"},oe={key:0,class:"gross-price q-pl-sm"},se=C(()=>l("div",{class:"tt-spacer"},null,-1)),le={key:0,class:"q-mt-sm"},re={class:"q-mx-md q-py-md",align:"center"},ie=C(()=>l("span",{class:"q-ml-md"}," Share On WhatsApp ",-1)),ne={__name:"DetailDialog",setup(u){const p=H(),x=J(),m=_(!1),w=E(),h=_(!1),f=_(),e=_({}),S=k(()=>e.value&&e.value.images?e.value.images.map(a=>a.file_path):[]),D=k(()=>!!x.cartItems.find(t=>t.product_id==e.value.id)),I=async()=>{const a={product_id:e.value.id,quantity:1};try{h.value=!0;const t=z(e.value);await x.addToCart(a,t)}finally{h.value=!1}},V=()=>{w.push({name:"my-cart"})},b=async()=>{m.value=!0;try{const a=await p.fetchSingleProduct(p.product.id);e.value=a.data,f.value=e.value.images[0].file_path}catch(a){console.log(a)}finally{m.value=!1}},B=a=>{const t=w.resolve({name:"whatsapp-share",params:{id:a.id}});console.log(t.href,"|||||||"),console.log(window.location.origin);const s=`${window.location.origin}/${t.href}`,U=`https://api.whatsapp.com/send?text=${encodeURIComponent(s)}`;window.open(U,"_blank")};return R(()=>{b()}),(a,t)=>(o(),n(M,{modelValue:Q(p).detailDialog,"onUpdate:modelValue":t[2]||(t[2]=s=>Q(p).detailDialog=s),position:"bottom","full-height":"",maximized:"",class:"tt-full-width tt-product-detail"},{default:r(()=>[i(L,null,{default:r(()=>[i(O,{style:{"max-height":"90vh","min-height":"60vh"},class:"scroll q-pa-none"},{default:r(()=>[l("div",null,[m.value?(o(),n(v,{key:0,height:"200px",square:""})):(o(),n(N,{key:1,modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=s=>f.value=s),"transition-prev":"jump-right","transition-next":"jump-left",swipeable:"",animated:"","control-color":"white","prev-icon":"arrow_left","next-icon":"arrow_right",navigation:"",infinite:"","keep-alive":"",autoplay:2e3,class:"detail-carousel"},{default:r(()=>[(o(!0),d(T,null,j(S.value,s=>(o(),n($,{key:s,name:s},{default:r(()=>[i(P,{class:"rounded-borders",fit:"contain",src:s,loading:"lazy","spinner-color":"white",height:"200px"},null,8,["src"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]))]),m.value?(o(),d("div",K,[i(v,{type:"text",class:"text-subtitle1"}),i(v,{type:"text",class:"text-subtitle1"}),i(v,{type:"text",class:"text-subtitle1"})])):(o(),d("div",X,[l("div",Y,[l("div",Z,c(e.value.name),1),l("div",ee,c(e.value.uomQty)+" "+c(e.value.uom),1)]),l("div",te,[l("div",ae,[g(" \u20B9 "+c(e.value.sellPrice)+" ",1),e.value.comparePrice?(o(),d("span",oe," \u20B9 "+c(e.value.comparePrice),1)):q("",!0)]),se,D.value?(o(),n(y,{key:0,unelevated:"",rounded:"",outline:"",class:"q-px-lg",color:"primary",onClick:V},{default:r(()=>[g(" Go to Cart ")]),_:1})):(o(),n(y,{key:1,class:"q-px-lg",rounded:"",unelevated:"",outline:"",color:"primary",onClick:I,loading:h.value},{default:r(()=>[g(" Add to cart ")]),_:1},8,["loading"]))]),e.value.description?(o(),d("p",le,c(e.value.description),1)):q("",!0)]))]),_:1}),i(W),l("div",re,[i(y,{unelevated:"",rounded:"",outline:"",class:"q-px-lg",color:"primary",icon:"mdi-whatsapp",onClick:t[1]||(t[1]=s=>B(e.value))},{default:r(()=>[ie]),_:1})])]),_:1})]),_:1},8,["modelValue"]))}};var ge=A(ne,[["__scopeId","data-v-146e7642"]]);export{ge as D};
