import{Q as v}from"./QSkeleton.c57ae26c.js";import{Q as b}from"./QImg.1c1ad563.js";import{Q as B,a as N}from"./QCarousel.ff8b4386.js";import{am as P,r as _,u as E,c as x,o as T,n as t,t as n,s as r,f as o,q as i,p as d,F as j,a9 as z,a8 as c,v as h,ad as Q,Q as k,a7 as C,an as A,ao as F,ap as G}from"./index.c73ad5d1.js";import{Q as L,a as R}from"./QCard.f27ef106.js";import{Q as U}from"./QSeparator.0ae7e94f.js";import{Q as M}from"./QCardActions.187f4417.js";import{Q as H}from"./QDialog.2a776b35.js";import{u as J}from"./globalStore.da87f570.js";import{u as K}from"./cart-store.24769fea.js";const O=u=>(F("data-v-1f569d01"),u=u(),G(),u),W={key:0,class:"q-pa-md"},X={key:1,class:"q-pa-md product-detail"},Y={class:""},Z={class:"text-h5 text-weight-medium q-mt-sm"},$={class:"text- text-grey-8 q-mt-sm"},ee={class:"flex item-center q-my-md"},te={class:"text-h6"},ae={key:0,class:"gross-price q-pl-sm"},se=O(()=>i("div",{class:"tt-spacer"},null,-1)),oe={key:0,class:"q-mt-sm"},le={__name:"DetailDialog",setup(u){const m=J(),y=K(),p=_(!1),q=E(),f=_(!1),g=_(),e=_({}),w=x(()=>e.value&&e.value.images?e.value.images.map(a=>a.file_path):[]),D=x(()=>!!y.cartItems.find(s=>s.product_id==e.value.id)),S=async()=>{const a={product_id:e.value.id,quantity:1};try{f.value=!0;const s=A(e.value);await y.addToCart(a,s)}finally{f.value=!1}},V=()=>{q.push({name:"my-cart"})},I=async()=>{p.value=!0;try{const a=await m.fetchSingleProduct(m.product.id);e.value=a.data,g.value=e.value.images[0].file_path}catch(a){console.log(a)}finally{p.value=!1}};return T(()=>{I()}),(a,s)=>(t(),n(H,{modelValue:C(m).detailDialog,"onUpdate:modelValue":s[1]||(s[1]=l=>C(m).detailDialog=l),position:"bottom","full-height":"",maximized:"",class:"tt-full-width tt-product-detail"},{default:r(()=>[o(L,null,{default:r(()=>[o(R,{style:{"max-height":"90vh","min-height":"60vh"},class:"scroll q-pa-none"},{default:r(()=>[i("div",null,[p.value?(t(),n(v,{key:0,height:"200px",square:""})):(t(),n(B,{key:1,modelValue:g.value,"onUpdate:modelValue":s[0]||(s[0]=l=>g.value=l),"transition-prev":"jump-right","transition-next":"jump-left",swipeable:"",animated:"","control-color":"white","prev-icon":"arrow_left","next-icon":"arrow_right",navigation:"",infinite:"","keep-alive":"",autoplay:2e3,class:"detail-carousel"},{default:r(()=>[(t(!0),d(j,null,z(w.value,l=>(t(),n(N,{key:l,name:l},{default:r(()=>[o(b,{class:"rounded-borders",fit:"contain",src:l,loading:"lazy","spinner-color":"white",height:"200px"},null,8,["src"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]))]),p.value?(t(),d("div",W,[o(v,{type:"text",class:"text-subtitle1"}),o(v,{type:"text",class:"text-subtitle1"}),o(v,{type:"text",class:"text-subtitle1"})])):(t(),d("div",X,[i("div",Y,[i("div",Z,c(e.value.name),1),i("div",$,c(e.value.uomQty)+" "+c(e.value.uom),1)]),i("div",ee,[i("div",te,[h(" \u20B9 "+c(e.value.sellPrice)+" ",1),e.value.comparePrice?(t(),d("span",ae," \u20B9 "+c(e.value.comparePrice),1)):Q("",!0)]),se,D.value?(t(),n(k,{key:0,unelevated:"",rounded:"",outline:"",class:"q-px-lg",color:"primary",onClick:V},{default:r(()=>[h(" Go to Cart ")]),_:1})):(t(),n(k,{key:1,class:"q-px-lg",rounded:"",unelevated:"",outline:"",color:"primary",onClick:S,loading:f.value},{default:r(()=>[h(" Add to cart ")]),_:1},8,["loading"]))]),e.value.description?(t(),d("p",oe,c(e.value.description),1)):Q("",!0)]))]),_:1}),o(U),o(M,{class:"q-mx-md",align:"right"})]),_:1})]),_:1},8,["modelValue"]))}};var fe=P(le,[["__scopeId","data-v-1f569d01"]]);export{fe as D};
