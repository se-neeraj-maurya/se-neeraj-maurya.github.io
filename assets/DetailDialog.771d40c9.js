import{Q as _}from"./QSkeleton.8b35fb2e.js";import{av as z,u as E,r as h,l as L,c as C,o as R,p as o,x as n,t as l,f as i,aw as T,ax as j,s as r,q as d,F as q,ah as F,ac as G,ag as c,al as S,v as g,af as x,Q as f,ay as O,az as W,aA as M,aB as H,aC as J}from"./index.85b4eabb.js";import{Q as K,a as X}from"./QCarousel.5dcf9bed.js";import{u as Y}from"./globalStore.2c6ed0bd.js";import{u as Z}from"./cart-store.17921f79.js";import{u as ee}from"./common.807e182b.js";const Q=u=>(H("data-v-47b7ed66"),u=u(),J(),u),te={key:0,class:"q-pa-md"},ae={key:1,class:"q-pa-md product-detail"},oe={class:""},se={class:"text-h5 text-weight-medium q-mt-sm"},le={class:"text- text-grey-8 q-mt-sm"},re={class:"flex item-center q-my-md"},ie={class:"text-h6"},ne={key:0,class:"gross-price q-pr-sm"},de=Q(()=>r("div",{class:"tt-spacer"},null,-1)),ce={key:0,class:"q-mt-sm"},ue={class:"q-mx-md q-py-md",align:"center"},pe=Q(()=>r("span",{class:"q-ml-md"}," Share On WhatsApp ",-1)),me={__name:"DetailDialog",setup(u){const{BuyProduct:b}=ee(),p=Y(),D=E(),w=Z(),m=h(!1),k=L(),v=h(!1),y=h(),e=h({}),I=C(()=>e.value&&e.value.images?e.value.images.map(a=>a.file_path):[]),V=C(()=>!!w.cartItems.find(t=>t.product_id==e.value.id)),B=async()=>{const a={product_id:e.value.id,quantity:1};try{v.value=!0;const t=M(e.value);await w.addToCart(a,t)}finally{v.value=!1}},P=()=>{k.push({name:"my-cart"})},U=async()=>{m.value=!0;try{const a=await p.fetchSingleProduct(p.product.id);e.value=a.data,y.value=e.value.images[0].file_path}catch(a){console.log(a)}finally{m.value=!1}},A=a=>{const t=k.resolve({name:"whatsapp-share",params:{id:a.id}});console.log(t.href,"|||||||"),console.log(window.location.origin);const s=`${window.location.origin}/${t.href}`,$=`https://api.whatsapp.com/send?text=${encodeURIComponent(s)}`;window.open($,"_blank")},N=a=>{b(a)};return R(()=>{U()}),(a,t)=>(o(),n(W,{modelValue:x(p).detailDialog,"onUpdate:modelValue":t[3]||(t[3]=s=>x(p).detailDialog=s),position:"bottom","full-height":"",maximized:"",class:"tt-full-width tt-product-detail"},{default:l(()=>[i(T,null,{default:l(()=>[i(j,{style:{"max-height":"90vh","min-height":"60vh"},class:"scroll q-pa-none"},{default:l(()=>[r("div",null,[m.value?(o(),n(_,{key:0,height:"200px",square:""})):(o(),n(K,{key:1,modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=s=>y.value=s),"transition-prev":"jump-right","transition-next":"jump-left",swipeable:"",animated:"","control-color":"white","prev-icon":"arrow_left","next-icon":"arrow_right",navigation:"",infinite:"","keep-alive":"",autoplay:2e3,class:"detail-carousel"},{default:l(()=>[(o(!0),d(q,null,F(I.value,s=>(o(),n(X,{key:s,name:s},{default:l(()=>[i(G,{class:"rounded-borders",fit:"contain",src:s,loading:"lazy","spinner-color":"white",height:"200px"},null,8,["src"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]))]),m.value?(o(),d("div",te,[i(_,{type:"text",class:"text-subtitle1"}),i(_,{type:"text",class:"text-subtitle1"}),i(_,{type:"text",class:"text-subtitle1"})])):(o(),d("div",ae,[r("div",oe,[r("div",se,c(e.value.name),1),r("div",le,c(e.value.uomQty)+" "+c(e.value.uom),1)]),r("div",re,[r("div",ie,[e.value.comparePrice?(o(),d("span",ne," \u20B9 "+c(e.value.comparePrice),1)):S("",!0),g(" \u20B9 "+c(e.value.sellPrice),1)]),de,x(D).isLoggedIn?(o(),d(q,{key:0},[V.value?(o(),n(f,{key:0,unelevated:"",rounded:"",outline:"",class:"q-px-lg",color:"primary",onClick:P},{default:l(()=>[g(" Go to Cart ")]),_:1})):(o(),n(f,{key:1,class:"q-px-lg",rounded:"",unelevated:"",outline:"",color:"primary",onClick:B,loading:v.value},{default:l(()=>[g(" Add to cart ")]),_:1},8,["loading"]))],64)):(o(),n(f,{key:1,class:"q-px-lg",rounded:"",unelevated:"",color:"primary",onClick:t[1]||(t[1]=s=>N(e.value)),loading:v.value},{default:l(()=>[g(" Buy Now ")]),_:1},8,["loading"]))]),e.value.description?(o(),d("p",ce,c(e.value.description),1)):S("",!0)]))]),_:1}),i(O),r("div",ue,[i(f,{unelevated:"",rounded:"",outline:"",class:"q-px-lg",color:"primary",icon:"mdi-whatsapp",onClick:t[2]||(t[2]=s=>A(e.value))},{default:l(()=>[pe]),_:1})])]),_:1})]),_:1},8,["modelValue"]))}};var xe=z(me,[["__scopeId","data-v-47b7ed66"]]);export{xe as D};
