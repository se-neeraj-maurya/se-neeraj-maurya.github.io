import{Q as _}from"./QSkeleton.42a0055b.js";import{av as z,u as E,r as h,l as L,c as C,o as R,p as o,x as n,t as l,f as r,aw as T,ax as j,s as i,q as d,F as q,ah as F,ac as G,ag as c,v as g,al as S,af as x,Q as f,ay as O,az as W,aA as M,aB as H,aC as J}from"./index.b415cf6e.js";import{Q as K,a as X}from"./QCarousel.ce68ee19.js";import{u as Y}from"./globalStore.1ad2db3a.js";import{u as Z}from"./cart-store.2ab2068a.js";import{u as ee}from"./common.d2aad96b.js";const Q=u=>(H("data-v-8e4c7940"),u=u(),J(),u),te={key:0,class:"q-pa-md"},ae={key:1,class:"q-pa-md product-detail"},oe={class:""},se={class:"text-h5 text-weight-medium q-mt-sm"},le={class:"text- text-grey-8 q-mt-sm"},ie={class:"flex item-center q-my-md"},re={class:"text-h6"},ne={key:0,class:"gross-price q-pl-sm"},de=Q(()=>i("div",{class:"tt-spacer"},null,-1)),ce={key:0,class:"q-mt-sm"},ue={class:"q-mx-md q-py-md",align:"center"},pe=Q(()=>i("span",{class:"q-ml-md"}," Share On WhatsApp ",-1)),me={__name:"DetailDialog",setup(u){const{BuyProduct:D}=ee(),p=Y(),I=E(),w=Z(),m=h(!1),k=L(),v=h(!1),y=h(),e=h({}),b=C(()=>e.value&&e.value.images?e.value.images.map(a=>a.file_path):[]),V=C(()=>!!w.cartItems.find(t=>t.product_id==e.value.id)),B=async()=>{const a={product_id:e.value.id,quantity:1};try{v.value=!0;const t=M(e.value);await w.addToCart(a,t)}finally{v.value=!1}},P=()=>{k.push({name:"my-cart"})},U=async()=>{m.value=!0;try{const a=await p.fetchSingleProduct(p.product.id);e.value=a.data,y.value=e.value.images[0].file_path}catch(a){console.log(a)}finally{m.value=!1}},A=a=>{const t=k.resolve({name:"whatsapp-share",params:{id:a.id}});console.log(t.href,"|||||||"),console.log(window.location.origin);const s=`${window.location.origin}/${t.href}`,$=`https://api.whatsapp.com/send?text=${encodeURIComponent(s)}`;window.open($,"_blank")},N=a=>{D(a)};return R(()=>{U()}),(a,t)=>(o(),n(W,{modelValue:x(p).detailDialog,"onUpdate:modelValue":t[3]||(t[3]=s=>x(p).detailDialog=s),position:"bottom","full-height":"",maximized:"",class:"tt-full-width tt-product-detail"},{default:l(()=>[r(T,null,{default:l(()=>[r(j,{style:{"max-height":"90vh","min-height":"60vh"},class:"scroll q-pa-none"},{default:l(()=>[i("div",null,[m.value?(o(),n(_,{key:0,height:"200px",square:""})):(o(),n(K,{key:1,modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=s=>y.value=s),"transition-prev":"jump-right","transition-next":"jump-left",swipeable:"",animated:"","control-color":"white","prev-icon":"arrow_left","next-icon":"arrow_right",navigation:"",infinite:"","keep-alive":"",autoplay:2e3,class:"detail-carousel"},{default:l(()=>[(o(!0),d(q,null,F(b.value,s=>(o(),n(X,{key:s,name:s},{default:l(()=>[r(G,{class:"rounded-borders",fit:"contain",src:s,loading:"lazy","spinner-color":"white",height:"200px"},null,8,["src"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]))]),m.value?(o(),d("div",te,[r(_,{type:"text",class:"text-subtitle1"}),r(_,{type:"text",class:"text-subtitle1"}),r(_,{type:"text",class:"text-subtitle1"})])):(o(),d("div",ae,[i("div",oe,[i("div",se,c(e.value.name),1),i("div",le,c(e.value.uomQty)+" "+c(e.value.uom),1)]),i("div",ie,[i("div",re,[g(" \u20B9 "+c(e.value.sellPrice)+" ",1),e.value.comparePrice?(o(),d("span",ne," \u20B9 "+c(e.value.comparePrice),1)):S("",!0)]),de,x(I).isLoggedIn?(o(),d(q,{key:0},[V.value?(o(),n(f,{key:0,unelevated:"",rounded:"",outline:"",class:"q-px-lg",color:"primary",onClick:P},{default:l(()=>[g(" Go to Cart ")]),_:1})):(o(),n(f,{key:1,class:"q-px-lg",rounded:"",unelevated:"",outline:"",color:"primary",onClick:B,loading:v.value},{default:l(()=>[g(" Add to cart ")]),_:1},8,["loading"]))],64)):(o(),n(f,{key:1,class:"q-px-lg",rounded:"",unelevated:"",color:"primary",onClick:t[1]||(t[1]=s=>N(e.value)),loading:v.value},{default:l(()=>[g(" Buy Now ")]),_:1},8,["loading"]))]),e.value.description?(o(),d("p",ce,c(e.value.description),1)):S("",!0)]))]),_:1}),r(O),i("div",ue,[r(f,{unelevated:"",rounded:"",outline:"",class:"q-px-lg",color:"primary",icon:"mdi-whatsapp",onClick:t[2]||(t[2]=s=>A(e.value))},{default:l(()=>[pe]),_:1})])]),_:1})]),_:1},8,["modelValue"]))}};var xe=z(me,[["__scopeId","data-v-8e4c7940"]]);export{xe as D};
