import{Q as v}from"./QSkeleton.31e066be.js";import{av as A,u as z,r as _,l as E,c as q,o as L,p as o,x as n,t as i,f as r,aw as R,ax as T,s as l,q as d,F as j,ah as F,ac as G,ag as c,al as x,v as h,Q as f,ay as M,af as w,az as O,aA as W,aB as H,aC as J}from"./index.e93ee3cf.js";import{Q as K,a as X}from"./QCarousel.47a6fd35.js";import{u as Y}from"./globalStore.41c0f409.js";import{u as Z}from"./cart-store.d6442c0c.js";import{u as ee}from"./common.eaeaec46.js";const S=u=>(H("data-v-7292dc62"),u=u(),J(),u),te={key:0,class:"q-pa-md"},ae={key:1,class:"q-pa-md product-detail"},oe={class:""},se={class:"text-h5 text-weight-medium q-mt-sm"},le={class:"text- text-grey-8 q-mt-sm"},ie={class:"flex item-center q-my-md"},re={class:"text-h6"},ne={key:0,class:"gross-price q-pr-sm"},de=S(()=>l("div",{class:"tt-spacer"},null,-1)),ce=S(()=>l("span",{class:"q-ml-sm"}," Share ",-1)),ue={key:0,class:"q-mt-sm"},pe={class:"q-py-md flex"},me={key:0,class:"col q-mx-md"},ve={class:"col q-mx-md"},_e={__name:"DetailDialog",setup(u){const{BuyProduct:Q}=ee(),p=Y(),D=z(),k=Z(),m=_(!1),C=E(),g=_(!1),y=_(),e=_({}),I=q(()=>e.value&&e.value.images?e.value.images.map(a=>a.file_path):[]),b=q(()=>!!k.cartItems.find(t=>t.product_id==e.value.id)),V=async()=>{const a={product_id:e.value.id,quantity:1};try{g.value=!0;const t=W(e.value);await k.addToCart(a,t)}finally{g.value=!1}},B=()=>{C.push({name:"my-cart"})},P=async()=>{m.value=!0;try{const a=await p.fetchSingleProduct(p.product.id);e.value=a.data,y.value=e.value.images[0].file_path}catch(a){console.log(a)}finally{m.value=!1}},U=a=>{const t=C.resolve({name:"whatsapp-share",params:{id:a.id}});console.log(t.href,"|||||||"),console.log(window.location.origin);const s=`${window.location.origin}${t.href}`,$=`https://api.whatsapp.com/send?text=${encodeURIComponent(s)}`;window.open($,"_blank")},N=a=>{Q(a)};return L(()=>{P()}),(a,t)=>(o(),n(O,{modelValue:w(p).detailDialog,"onUpdate:modelValue":t[3]||(t[3]=s=>w(p).detailDialog=s),position:"bottom","full-height":"",maximized:"",class:"tt-full-width tt-product-detail"},{default:i(()=>[r(R,null,{default:i(()=>[r(T,{style:{"max-height":"90vh","min-height":"60vh"},class:"scroll q-pa-none"},{default:i(()=>[l("div",null,[m.value?(o(),n(v,{key:0,height:"200px",square:""})):(o(),n(K,{key:1,modelValue:y.value,"onUpdate:modelValue":t[0]||(t[0]=s=>y.value=s),"transition-prev":"jump-right","transition-next":"jump-left",swipeable:"",animated:"","control-color":"white","prev-icon":"arrow_left","next-icon":"arrow_right",navigation:"",infinite:"","keep-alive":"",autoplay:2e3,class:"detail-carousel"},{default:i(()=>[(o(!0),d(j,null,F(I.value,s=>(o(),n(X,{key:s,name:s},{default:i(()=>[r(G,{class:"rounded-borders",fit:"contain",src:s,loading:"lazy","spinner-color":"white",height:"200px"},null,8,["src"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]))]),m.value?(o(),d("div",te,[r(v,{type:"text",class:"text-subtitle1"}),r(v,{type:"text",class:"text-subtitle1"}),r(v,{type:"text",class:"text-subtitle1"})])):(o(),d("div",ae,[l("div",oe,[l("div",se,c(e.value.name),1),l("div",le,c(e.value.uomQty)+" "+c(e.value.uom),1)]),l("div",ie,[l("div",re,[e.value.comparePrice?(o(),d("span",ne," \u20B9 "+c(e.value.comparePrice),1)):x("",!0),h(" \u20B9 "+c(e.value.sellPrice),1)]),de,r(f,{unelevated:"",rounded:"",outline:"",class:"",color:"primary",icon:"mdi-whatsapp",onClick:t[1]||(t[1]=s=>U(e.value))},{default:i(()=>[ce]),_:1})]),e.value.description?(o(),d("p",ue,c(e.value.description),1)):x("",!0)]))]),_:1}),r(M),l("div",pe,[w(D).isLoggedIn?(o(),d("div",me,[b.value?(o(),n(f,{key:0,unelevated:"",rounded:"",outline:"",class:"q-px-lg full-width",color:"primary",onClick:B},{default:i(()=>[h(" Go to Cart ")]),_:1})):(o(),n(f,{key:1,class:"q-px-lg full-width",rounded:"",unelevated:"",outline:"",color:"primary",onClick:V,loading:g.value},{default:i(()=>[h(" Add to cart ")]),_:1},8,["loading"]))])):x("",!0),l("div",ve,[r(f,{class:"q-px-lg full-width",rounded:"",unelevated:"",color:"primary",onClick:t[2]||(t[2]=s=>N(e.value))},{default:i(()=>[h(" Buy Now ")]),_:1})])])]),_:1})]),_:1},8,["modelValue"]))}};var ke=A(_e,[["__scopeId","data-v-7292dc62"]]);export{ke as D};
