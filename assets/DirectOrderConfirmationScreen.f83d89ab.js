import{u as Y,l as M,m as j,r as g,c as N,o as G,p as n,q as h,f as a,af as d,t as m,ax as R,s as e,Q as q,F as A,ai as w,v as u,ag as p,am as O,al as K,x as B,aw as L}from"./index.85b4eabb.js";import{Q as W}from"./QCircularProgress.fd022cd5.js";import{Q as I}from"./QRadio.039b9419.js";import{u as Z}from"./cart-store.17921f79.js";import{_ as H}from"./ShippingAddress.6ba81030.js";import{u as J}from"./globalStore.2c6ed0bd.js";import"./format.2a3572e1.js";import"./option-sizes.79a54e45.js";import"./QCardActions.b7aaf9b3.js";const X={class:"wrapper-my-profile"},ee={class:"row items-center"},te=e("div",{class:"text-h5 q-ml-md"},"Order Confirmation",-1),ae={key:0,class:"text-center q-pa-xl"},se={class:"profile-card col q-mx-md q-my-md q-px-md q-py-md bg-white"},le={class:"flex items-center"},oe=e("div",{class:"text-h5 text-weight-medium"},"Address",-1),re=e("div",{class:"tt-spacer"},null,-1),ne={class:"q-mt-md row no-wrap q-pr-md"},de={style:{"min-width":"30px"}},ie={class:"text-h6 text-grey-8"},ce=e("br",null,null,-1),me={key:1,class:"text-center"},ue=e("div",{class:"text-red q-pa-lg text-h6"},"No shipping address",-1),pe={class:"profile-card col q-mx-md q-my-md q-px-md q-py-md flex items-center bg-white text-primary"},ve=e("div",{class:"text-h5 text-weight-medium"},"Total Pay :",-1),he=e("div",{class:"tt-spacer"},null,-1),_e={class:"text-h5 text-weight-bold"},xe={class:"flex q-mx-sm"},ye=e("div",{class:"text-h6 q-mt-sm"},"Cash on delivery",-1),fe=e("div",{class:"text-h6 q-mt-sm"},"Online",-1),ge={key:0,class:"q-mt-xl q-px-lg text-red text-h6",style:{"max-width":"360px"}},qe=e("b",null," \u20B9200 ",-1),we={class:"text-center q-mt-xl q-px-lg"},Ae={__name:"DirectOrderConfirmationScreen",setup(ke){const D=J(),s=Y(),P=Z(),b=M(),$=j(),o=g("cash"),k=g(!1),C=g(!0),_=g(!1),v=g({}),U=()=>{b.replace({name:"home"})},r=N(()=>s.address[0]),V=l=>{o.value=l};N(()=>P.cartItems.reduce((l,t)=>(t.isPublished&&(l=l+t.sellPrice*t.quantity),l),0));const E=async()=>{if(!(s.address&&s.address.length))return _.value=!0,!1;try{k.value=!0;const l={payment_mode:o.value};await P.placeOrder(l),b.replace({name:"success-confirmation"})}finally{k.value=!1}},z=()=>{_.value=!0},F=()=>{var i,x,y;const l={key:"YOUR_RAZORPAY_KEY_ID",amount:v.value.sellPrice*100,currency:"INR",name:"Shanvi shop",description:"We provides the all type of products",image:"https://se-neeraj-maurya.github.io/icons/favicon-32x32.png",order_id:"order_xxx",handler:function(f){console.log(f),alert("Payment successful! Payment ID: "+f.razorpay_payment_id)},prefill:{name:(i=r.value)==null?void 0:i.name,email:(x=r.value)==null?void 0:x.email,contact:(y=r.value)==null?void 0:y.phone},notes:{address:"Note about the transaction"},theme:{color:"#F37254"}};new Razorpay(l).open()},T=async()=>{const l=$.params.id;try{C.value=!0;const t=await D.fetchSingleProduct(l);v.value=t.data}catch{b.go(-1)}finally{C.value=!1}v.value.sellPrice<200&&(o.value="online"),s.address&&s.address.length||(_.value=!0)};return G(()=>{T()}),(l,t)=>(n(),h("div",X,[a(H,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=i=>_.value=i),data:r.value,"is-update":!!(d(s).address&&d(s).address.length)},null,8,["modelValue","data","is-update"]),a(L,{class:"bg-grey-3"},{default:m(()=>[a(R,{class:"row items-center header-action-bar q-px-xs"},{default:m(()=>[e("div",ee,[a(q,{round:"",unelevated:"",icon:"arrow_back",onClick:U}),te])]),_:1}),a(R,{style:{height:"calc(100vh - 66px)"},class:"scroll q-pa-none"},{default:m(()=>{var i,x,y,f,S,Q;return[C.value?(n(),h("div",ae,[a(W,{indeterminate:"",rounded:"",size:"50px",color:"primary",class:"q-ma-md"})])):(n(),h(A,{key:1},[e("div",se,[d(s).address&&d(s).address.length?(n(),h(A,{key:0},[e("div",le,[oe,re,a(q,{onClick:t[1]||(t[1]=c=>z()),color:"primary",size:"13px",flat:"",rounded:"","no-caps":"",unelevated:""},{default:m(()=>[a(w,{size:"13px",name:"edit",style:{"margin-right":"2px"}}),u(" Edit ")]),_:1})]),e("div",ne,[e("div",de,[a(w,{size:"24px",name:"pin_drop",style:{"margin-right":"2px"}})]),e("p",ie,[u(p((i=r.value)==null?void 0:i.name)+" || "+p((x=r.value)==null?void 0:x.phone)+" ",1),ce,u(" "+p((y=r.value)==null?void 0:y.address_line1)+" "+p((f=r.value)==null?void 0:f.address_line2)+" "+p((S=r.value)==null?void 0:S.city)+" "+p((Q=r.value)==null?void 0:Q.postal_code),1)])])],64)):(n(),h("div",me,[ue,a(q,{onClick:t[2]||(t[2]=c=>z()),color:"primary",rounded:"",outline:"","no-caps":"",unelevated:""},{default:m(()=>[a(w,{name:"add",style:{"margin-right":"2px"}}),u(" Add Shipping Address ")]),_:1})]))]),e("div",pe,[ve,he,e("div",_e," \u20B9 "+p(v.value.sellPrice),1)]),e("div",xe,[e("div",{class:O(["payment-type-card col q-mx-sm q-px-md q-py-lg bg-white text-center text-primary",{selected:o.value=="cash"}]),onClick:t[4]||(t[4]=c=>V("cash"))},[e("div",null,[a(I,{modelValue:o.value,"onUpdate:modelValue":t[3]||(t[3]=c=>o.value=c),val:"cash",color:"primary",class:"radio-icon"},null,8,["modelValue"])]),a(w,{size:"30px",name:"money"}),ye],2),e("div",{class:O(["payment-type-card col q-mx-sm q-px-md q-py-lg bg-white text-center text-primary",{selected:o.value=="online"}]),onClick:t[6]||(t[6]=c=>V("online"))},[e("div",null,[a(I,{modelValue:o.value,"onUpdate:modelValue":t[5]||(t[5]=c=>o.value=c),val:"online",color:"primary",class:"radio-icon"},null,8,["modelValue"])]),a(w,{size:"30px",name:"credit_card"}),fe],2)]),v.value.sellPrice<200&&o.value=="cash"?(n(),h("div",ge,[u(" Cash on delivery available on minimum order amount "),qe])):K("",!0),e("div",we,[o.value=="online"?(n(),B(q,{key:0,class:"full-width",color:"primary","no-caps":"",unelevated:"",rounded:"",loading:k.value,onClick:F,disable:!(d(s).address&&d(s).address.length)},{default:m(()=>[u(" Make Payment ")]),_:1},8,["loading","disable"])):(n(),B(q,{key:1,class:"full-width",color:"primary","no-caps":"",unelevated:"",rounded:"",onClick:E,loading:k.value,disable:v.value.sellPrice<200||!(d(s).address&&d(s).address.length)},{default:m(()=>[u(" Confirm Order ")]),_:1},8,["loading","disable"]))])],64))]}),_:1})]),_:1})]))}};export{Ae as default};
