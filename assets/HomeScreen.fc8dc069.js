import{r,w as P,n as i,p as g,q as n,F as w,a6 as x,a9 as $,f as u,a5 as q,c as S,t as h,s as p,u as b,o as B,a7 as A,a4 as I,Q as M,v as N,aa as j}from"./index.8751dce7.js";import{Q as D}from"./QInput.fd95b306.js";import{Q as F}from"./QPage.dc730e3e.js";import{u as H}from"./globalStore.12b03c26.js";import{_ as R}from"./ProductList2.86fb8a8e.js";import{Q as C}from"./QImg.77db7b3d.js";import{a as U,Q as z}from"./QCarousel.af56e837.js";import{c as E}from"./db.eb94c5fc.js";import{u as G}from"./authStore.f730b998.js";import"./use-dark.a49f4c42.js";import"./uid.42677368.js";import"./focus-manager.02955f48.js";import"./use-form.9bdb91b5.js";import"./axios.boot.0b41ca4e.js";import"./selection.f199fe46.js";const O={class:"cat-list-x-container"},T=["onClick"],X={class:"q-pt-sm ellipsis-2-lines"},J={__name:"CategoryListX",props:{modelValue:{type:String,default:null},list:{type:Array}},setup(v){const a=v,d=r();return P(()=>a.modelValue,t=>{d.value=t},{immediate:!0}),(t,m)=>(i(),g("div",O,[n("ul",null,[(i(!0),g(w,null,x(a.list,s=>(i(),g("li",{key:s,class:$({active:s.title==d.value}),onClick:c=>t.$emit("update:model-value",s.title)},[u(C,{class:"rounded-borders",style:{width:"60px","min-height":"60px"},src:s.image},null,8,["src"]),n("div",X,q(s.title),1)],10,T))),128))])]))}},K={__name:"HomeCarousel",props:{items:{type:Array}},emits:["click"],setup(v,{emit:a}){const d=v,t=r("carousel-1"),m=S(()=>d.items);return(s,c)=>(i(),h(z,{modelValue:t.value,"onUpdate:modelValue":c[0]||(c[0]=o=>t.value=o),"transition-prev":"jump-right","transition-next":"jump-left",swipeable:"",animated:"","control-color":"white","prev-icon":"arrow_left","next-icon":"arrow_right",navigation:"",infinite:"","keep-alive":"",autoplay:2e3},{default:p(()=>[(i(!0),g(w,null,x(m.value,o=>(i(),h(U,{key:o.name,name:o.name},{default:p(()=>[u(C,{class:"rounded-borders",fit:"contain",src:o.image},null,8,["src"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]))}},W={class:"product-list"},Y={class:"q-pa-sm full-width"},Z={class:"row no-wrap items-center"},ee={class:"q-px-sm col"},te=n("div",{class:"q-pa-md text-title"},"Category",-1),ae=n("div",{class:"q-pa-md q-mt-sm text-title"},"Latest Items",-1),se={class:"q-pa-md text-center"},ye=Object.assign({name:"HomeScreen"},{__name:"HomeScreen",setup(v){const a=H(),d=b();G();const t=r("Soups & Porridges"),m=r([]),s=r(!1),c=r(!1),o=r(1),_=r(1),f=r([]),k=l=>{a.openProductDetail(l)},Q=async()=>{const l={page:1};try{s.value=!0;const e=await a.fetchProduct(l);f.value=e.data.list,o.value=e.data.total_pages,_.value=e.data.page}catch(e){console.log(e)}finally{s.value=!1}},V=async()=>{const l={page:_.value+1};try{c.value=!0;const e=await a.fetchProduct(l);f.value=f.value.concat(e.data.list),o.value=e.data.total_pages,_.value=e.data.page}finally{c.value=!1}},L=l=>{d.push({name:"product-by-category",params:{category:l.replaceAll(" ","-")}})};return B(()=>{console.log("fetchProductList"),m.value=a.categories,t.value=a.categories[0].title,Q()}),(l,e)=>(i(),h(F,{class:"main-container row no-wrap product-list-page"},{default:p(()=>[n("div",W,[n("div",Y,[n("div",Z,[n("div",ee,[u(D,{outlined:"",rounded:"",dense:"",class:"search-input",placeholder:"Search...",onFocus:e[0]||(e[0]=y=>l.$router.push({name:"search"}))},{append:p(()=>[u(A,{name:"search"})]),_:1})])])]),u(K,{items:I(E)},null,8,["items"]),te,u(J,{list:m.value,modelValue:t.value,"onUpdate:modelValue":[e[1]||(e[1]=y=>t.value=y),L]},null,8,["list","modelValue"]),ae,u(R,{products:f.value,"onClick:detail":k},null,8,["products"]),n("div",se,[_.value<o.value?(i(),h(M,{key:0,class:"full-widh q-px-lg",color:"primary","no-caps":"",outline:"",unelevated:"",rounded:"",loading:c.value,onClick:V},{default:p(()=>[N(" Load More... ")]),_:1},8,["loading"])):j("",!0)])])]),_:1}))}});export{ye as default};
