import{u as E,l as R,r as u,o as T,n as d,t as y,s as a,f as e,q as r,Q as v,v as i,p as q,a4 as j,ac as P,a7 as n,F as z,a8 as G,$ as M}from"./index.5dbc4d9f.js";import{a as c,Q as f}from"./QCard.2022731b.js";import{Q as b}from"./QSeparator.534aecfa.js";import{Q as C}from"./QSkeleton.b423cbfb.js";import{Q as V}from"./QImg.daf9590e.js";import{Q as O,a as I}from"./QItem.8c4d6b3d.js";import{Q as Y}from"./QToggle.f8302e1d.js";import{Q as H}from"./QCardActions.2a57d5fd.js";import{Q as J}from"./QDialog.2b67d994.js";import{Q as K}from"./QPage.04ad7494.js";import{C as W}from"./ClosePopup.0a4c803a.js";import{u as X}from"./adminStore.0570ef5d.js";import{I as Z}from"./ImageGallery.c075be5d.js";import"./use-dark.a1b71146.js";import"./option-sizes.b8a6ec60.js";import"./use-form.f625a164.js";import"./focus-manager.02955f48.js";import"./axios.boot.ea71beab.js";const ee={class:"row items-center"},ae=r("div",{class:"text-h5 q-ml-md"},"Products Detail",-1),te=r("div",{class:"tt-spacer"},null,-1),se={key:0,class:"q-ma-md"},le={key:1,class:"lists q-pa-md"},oe={class:"q-mb-md"},re=r("span",{class:"text-weight-medium"},"Sell Price :",-1),de={class:"q-mb-md"},ie=r("span",{class:"text-weight-medium"},"Cost Price :",-1),ce={class:"q-mb-md ellipsis"},ue=r("span",{class:"text-weight-medium"},"Stock :",-1),ne={class:"q-mb-md"},me=r("span",{class:"text-weight-medium"},"Unit :",-1),pe=r("div",{class:"text-weight-medium q-mb-sm"},"Description :",-1),ve=["onClick"],fe=r("span",{class:"q-ml-sm text-h5 text-center"},"Are you sure want to delete Image.",-1),Ue=Object.assign({name:"ProductLists"},{__name:"ListDetail",setup(_e){const m=X(),S=E(),x=R(),t=u({}),p=u(!0),_=u([]),g=u(!1),Q=u(0),k=u(-1),h=u(!1),D=async(s,l)=>{try{const o={id:s,status:l},w=await m.UpdateProductStatus(o);$q.notify({progress:!0,position:"top",message:w.message,color:"green",timeout:2e3})}catch(o){console.error(o)}finally{}},A=async s=>{try{p.value=!0;const l=await m.FetchSingleProduct(s);t.value=l.data}finally{p.value=!1}},B=()=>{S.back()},L=()=>{const s=x.params.id;S.push({name:"product-update",params:{id:s}})},N=s=>{console.log(s),s&&Array.isArray(s)&&(_.value=s.map(l=>l.url))},U=async()=>{try{const s=x.params.id;p.value=!0;const l={id:s,images:_.value};await m.uploadProductImage(l);const o=await m.FetchSingleProduct(s);t.value=o.data,_.value=[]}finally{p.value=!1}},F=(s,l)=>{Q.value=s,k.value=l,h.value=!0},$=async()=>{g.value=!0;try{await m.deleteProductImage(Q.value),t.value.images.splice(k.value,1),Q.value=0,k.value=-1,h.value=!1}catch(s){console.error(s)}finally{g.value=!1}};return T(()=>{const s=x.params.id;A(s)}),(s,l)=>(d(),y(K,{class:"aa-product-list-page"},{default:a(()=>[e(f,{unelevated:"",class:"aa-product-page"},{default:a(()=>[e(c,{class:"row items-center header-action-bar q-px-xs"},{default:a(()=>[r("div",ee,[e(v,{round:"",unelevated:"",icon:"arrow_back",onClick:B}),ae]),te,e(v,{class:"q-mr-md",rounded:"",outline:"",unelevated:"",onClick:L},{default:a(()=>[i("Edit")]),_:1})]),_:1}),e(b),e(c,{style:{height:"calc(100vh - 66px)"},class:"scroll q-pa-none bg-grey-4"},{default:a(()=>[p.value?(d(),q("div",se,[e(C,{class:"q-mb-lg",height:"200px",square:""}),e(C,{class:"q-mb-lg",height:"150px",square:""}),e(C,{height:"100px"})])):(d(),q("div",le,[e(f,{class:"my-card q-mb-md",flat:"",bordered:""},{default:a(()=>[e(O,null,{default:a(()=>[e(I,{avatar:""},{default:a(()=>[t.value.images&&t.value.images.length?(d(),y(j,{key:0,square:""},{default:a(()=>[e(V,{src:t.value.images[0].file_path},null,8,["src"])]),_:1})):P("",!0)]),_:1}),e(I,{class:"ellipsis text-weight-medium"},{default:a(()=>[i(n(t.value.name),1)]),_:1}),e(I,{side:""},{default:a(()=>[e(Y,{"onUpdate:modelValue":[l[0]||(l[0]=o=>D(t.value.id,o)),l[1]||(l[1]=o=>t.value.isPublished=o)],modelValue:t.value.isPublished},null,8,["modelValue"])]),_:1})]),_:1}),e(b),e(c,{horizontal:""},{default:a(()=>[e(c,{class:"col q-pa-md"},{default:a(()=>[r("div",oe,[re,i(" "+n(t.value.sellPrice),1)]),r("div",de,[ie,i(" "+n(t.value.costPrice?t.value.costPrice:"--"),1)])]),_:1}),e(b,{vertical:""}),e(c,{class:"col q-pa-md"},{default:a(()=>[r("div",ce,[ue,i(" "+n(t.value.stock?t.value.stock:"--"),1)]),r("div",ne,[me,i(" "+n(t.value.uomQty)+" "+n(t.value.uom),1)])]),_:1})]),_:1}),e(b),e(c,{class:"col q-pa-md"},{default:a(()=>[pe,i(" "+n(t.value.description),1)]),_:1})]),_:1}),e(f,{class:"my-card row q-mb-md q-pa-md",flat:"",bordered:""},{default:a(()=>[(d(!0),q(z,null,G(t.value.images,(o,w)=>(d(),y(c,{class:"col-6 rounded-borders",style:{border:"1px solid grey"},key:o.file_path},{default:a(()=>[e(V,{src:o.file_path},null,8,["src"]),t.value.images.length>1?(d(),q("div",{key:0,onClick:ge=>F(o.id,w),class:"text-red text-center q-mt-sm"}," Delete ",8,ve)):P("",!0)]),_:2},1024))),128))]),_:1}),e(f,{class:"q-mb-md q-pa-md",flat:"",bordered:""},{default:a(()=>[e(Z,{multiple:"",onUpload:N}),_.value.length?(d(),y(v,{key:0,color:"primary",outline:"",class:"q-mt-md full-width",onClick:U},{default:a(()=>[i("Click to upload")]),_:1})):P("",!0)]),_:1})]))]),_:1})]),_:1}),e(J,{modelValue:h.value,"onUpdate:modelValue":l[2]||(l[2]=o=>h.value=o),persistent:""},{default:a(()=>[e(f,{class:"q-pa-md"},{default:a(()=>[e(c,{class:"row items-center"},{default:a(()=>[fe]),_:1}),e(H,{align:"center"},{default:a(()=>[M(e(v,{outline:"",disable:g.value,class:"q-mx-md",label:"No",color:"red"},null,8,["disable"]),[[W]]),e(v,{class:"q-mx-md",label:"Yes",color:"red",loading:g.value,onClick:$},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{Ue as default};
