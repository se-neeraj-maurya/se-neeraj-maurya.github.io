import{u as W,r as c,o as X,n as r,t as n,s as a,f as e,q as s,Q as _,p as w,a8 as U,a4 as $,F as B,a9 as Z,a6 as z,ac as A,a7 as u,$ as P,v as i}from"./index.5dbc4d9f.js";import{a as v,Q as M}from"./QCard.2022731b.js";import{Q as g}from"./QSeparator.534aecfa.js";import{Q as T}from"./QSkeleton.b423cbfb.js";import{Q as ee}from"./QInput.950ed05b.js";import{Q as te}from"./QImg.daf9590e.js";import{Q as b,a as m}from"./QItem.8c4d6b3d.js";import{Q as ae}from"./QToggle.f8302e1d.js";import{Q as se}from"./QList.afbfdbad.js";import{Q as le}from"./QMenu.93e28b33.js";import{Q as oe}from"./QCardActions.2a57d5fd.js";import{Q as re}from"./QDialog.2b67d994.js";import{Q as de}from"./QPage.04ad7494.js";import{C}from"./ClosePopup.0a4c803a.js";import{u as ce}from"./adminStore.0570ef5d.js";import{N as ie}from"./NoData.4f21d089.js";import"./use-dark.a1b71146.js";import"./uid.42677368.js";import"./focus-manager.02955f48.js";import"./use-form.f625a164.js";import"./option-sizes.b8a6ec60.js";import"./selection.70b38d61.js";import"./axios.boot.ea71beab.js";const ne={class:"row items-center"},ue=s("div",{class:"text-h5 q-ml-md"},"My Products",-1),me=s("div",{class:"tt-spacer"},null,-1),pe=s("span",{style:{"font-weight":"400","letter-spacing":"0.65px"},class:"q-mr-xs text-capitalize"},"Add New ",-1),fe={class:"q-pl-sm full-width"},_e={class:"text-weight-medium text-h6 q-mb-xs"},ve={class:"q-mx-md q-mt-md",style:{position:"sticky",top:0,zIndex:1,background:"#e0e0e0"}},he={class:"lists q-pa-md"},ge={class:"text-weight-medium text-h6"},ye=s("span",{class:"text-weight-medium"},"Sell Price :",-1),xe=s("span",{class:"text-weight-medium"},"Cost Price :",-1),ke={class:"ellipsis"},Qe=s("span",{class:"text-weight-medium"},"Stock :",-1),qe=s("span",{class:"text-weight-medium"},"Unit :",-1),we={key:1,class:"q-mt-lg text-center"},Pe=s("p",{class:"text-center text-h5 q-py-md"},"No product available.",-1),be={class:"q-pa-md text-center"},Ce=s("span",{class:"q-ml-sm text-h5 text-center"},"Are you sure want to delete Product.",-1),Xe=Object.assign({name:"ProductLists"},{__name:"Lists",setup(Ve){const d=ce(),y=W(),V=c(!1),x=c(!1),k=c(!1),S=c(0),I=c(-1),Q=c(),q=c(1),N=c(1),L=c(!1),p=c(),F=(o,l)=>{S.value=o,I.value=l,x.value=!0},E=async()=>{k.value=!0;try{await d.DeleteProduct(S.value),d.products.splice(I.value,1),S.value=0,I.value=-1,x.value=!1}catch(o){console.error(o)}finally{k.value=!1}},j=async(o,l)=>{try{const t={id:o,status:l},h=await d.UpdateProductStatus(t);$q.notify({progress:!0,position:"top",message:h.message,color:"green",timeout:2e3})}catch(t){console.error(t)}finally{}},D=async()=>{const o={page:1,search:Q.value};try{V.value=!0;const l=await d.FetchProducts({params:o});d.products=l.data.list,q.value=l.data.page,N.value=l.data.total_pages}finally{V.value=!1}},O=async()=>{try{const o={page:q.value+1,search:Q.value};L.value=!0;const l=await d.FetchProducts({params:o});d.products=[...d.products,...l.data.list],q.value=l.data.page,N.value=l.data.total_pages}finally{L.value=!1}},R=()=>{p.value&&clearTimeout(p.value),p.value=setTimeout(()=>{D()},500)},Y=()=>{p.value&&clearTimeout(p.value),p.value=setTimeout(()=>{D()},500)},G=()=>{y.push({name:"product-create"})},H=()=>{y.replace({name:"home"})},J=(o,l)=>{y.push({name:"product-update",params:{id:o}})},K=o=>{y.push({name:"product-list-detail",params:{id:o}})};return X(()=>{D()}),(o,l)=>(r(),n(de,{class:"aa-product-list-page"},{default:a(()=>[e(M,{unelevated:"",class:"aa-product-page"},{default:a(()=>[e(v,{class:"row items-center header-action-bar q-px-xs"},{default:a(()=>[s("div",ne,[e(_,{round:"",unelevated:"",icon:"arrow_back",onClick:H}),ue]),me,e(_,{flat:"",color:"primary",onClick:G},{default:a(()=>[pe]),_:1})]),_:1}),e(g),e(v,{style:{height:"calc(100vh - 66px)"},class:"scroll q-pa-none bg-grey-4"},{default:a(()=>[V.value?(r(),w(B,{key:0},U(10,t=>s("div",{class:"profile-card col q-ma-md q-px-md q-py-md flex no-wrap items-center bg-white",key:t},[s("div",null,[e($,{size:"54px"},{default:a(()=>[e(T,{height:"55px",width:"55px",square:""})]),_:1})]),s("div",fe,[s("div",_e,[e(T,{height:"30px",square:""})]),s("div",null,[e(T)])])])),64)):(r(),w(B,{key:1},[s("div",ve,[e(ee,{outlined:"",rounded:"",dense:"",modelValue:Q.value,"onUpdate:modelValue":[l[0]||(l[0]=t=>Q.value=t),l[1]||(l[1]=t=>R())],onClear:Y,clearable:"",class:"search-input",placeholder:"Search Product..."},{append:a(()=>[e(Z,{name:"search"})]),_:1},8,["modelValue"])]),s("div",he,[z(d).products.length?(r(!0),w(B,{key:0},U(z(d).products,(t,h)=>(r(),n(M,{class:"my-card q-mb-md",flat:"",bordered:"",key:"product"+h},{default:a(()=>[e(b,null,{default:a(()=>[e(m,{avatar:""},{default:a(()=>[t.images&&t.images.length?(r(),n($,{key:0,square:""},{default:a(()=>[e(te,{src:t.images[0].file_path},null,8,["src"])]),_:2},1024)):A("",!0)]),_:2},1024),e(m,{class:"ellipsis"},{default:a(()=>[s("div",ge,u(t.name),1),s("div",null,u(t.category?"#"+t.category:""),1)]),_:2},1024),e(m,{side:""},{default:a(()=>[e(ae,{disable:!t.stock,"onUpdate:modelValue":[f=>j(t.id,f),f=>t.isPublished=f],modelValue:t.isPublished},null,8,["disable","onUpdate:modelValue","modelValue"])]),_:2},1024),e(m,{side:""},{default:a(()=>[e(_,{round:"",flat:"",color:"primary",size:"sm",icon:"more_vert"},{default:a(()=>[e(le,null,{default:a(()=>[e(se,{dense:"",style:{"min-width":"100px"}},{default:a(()=>[P((r(),n(b,{onClick:f=>J(t.id,h),clickable:""},{default:a(()=>[e(m,null,{default:a(()=>[i("Edit")]),_:1})]),_:2},1032,["onClick"])),[[C]]),e(g),P((r(),n(b,{onClick:f=>F(t.id,h),clickable:""},{default:a(()=>[e(m,null,{default:a(()=>[i("Delete")]),_:1})]),_:2},1032,["onClick"])),[[C]]),e(g),P((r(),n(b,{onClick:f=>K(t.id),clickable:""},{default:a(()=>[e(m,null,{default:a(()=>[i("View")]),_:1})]),_:2},1032,["onClick"])),[[C]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(g),e(v,{horizontal:""},{default:a(()=>[e(v,{class:"col q-pa-sm"},{default:a(()=>[s("div",null,[ye,i(" \u20B9"+u(t.sellPrice),1)]),s("div",null,[xe,i(" \u20B9"+u(t.costPrice?t.costPrice:"--"),1)])]),_:2},1024),e(g,{vertical:""}),e(v,{class:"col q-pa-sm"},{default:a(()=>[s("div",ke,[Qe,i(" "+u(t.stock?t.stock:"--"),1)]),s("div",null,[qe,i(" "+u(t.uomQty)+" "+u(t.uom),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)):(r(),w("div",we,[e(ie),Pe]))]),s("div",be,[q.value<N.value?(r(),n(_,{key:0,class:"full-widh q-px-lg",color:"primary","no-caps":"",outline:"",unelevated:"",rounded:"",loading:L.value,onClick:O},{default:a(()=>[i(" Load More... ")]),_:1},8,["loading"])):A("",!0)])],64))]),_:1})]),_:1}),e(re,{modelValue:x.value,"onUpdate:modelValue":l[2]||(l[2]=t=>x.value=t),persistent:""},{default:a(()=>[e(M,{class:"q-pa-md"},{default:a(()=>[e(v,{class:"row items-center"},{default:a(()=>[Ce]),_:1}),e(oe,{align:"center"},{default:a(()=>[P(e(_,{outline:"",disable:k.value,class:"q-mx-md",label:"No",color:"red"},null,8,["disable"]),[[C]]),e(_,{class:"q-mx-md",label:"Yes",color:"red",loading:k.value,onClick:E},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{Xe as default};
