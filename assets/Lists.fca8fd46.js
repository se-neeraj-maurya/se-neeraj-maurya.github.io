import{l as W,r,o as X,p as d,x as u,t,f as e,aw as z,ax as _,s,Q as v,ay as g,q as Q,F as B,ah as T,ad as U,aF as Z,ai as ee,af as A,ac as ae,al as F,ag as i,a1 as P,v as n,az as te}from"./index.85b4eabb.js";import{Q as M}from"./QSkeleton.8b35fb2e.js";import{Q as b,a as p}from"./QItem.bb4b5915.js";import{Q as se}from"./QToggle.fc2ee63b.js";import{Q as le}from"./QList.af14cb60.js";import{Q as oe}from"./QMenu.56f8c2ac.js";import{Q as de}from"./QCardActions.b7aaf9b3.js";import{Q as ce}from"./QPage.f75849b8.js";import{C}from"./ClosePopup.1d3c12f1.js";import{u as re}from"./adminStore.394d471e.js";import{N as ne}from"./NoData.54acfb85.js";import"./option-sizes.79a54e45.js";import"./selection.b1e3b628.js";const ue={class:"row items-center"},ie=s("div",{class:"text-h5 q-ml-md"},"My Products",-1),pe=s("div",{class:"tt-spacer"},null,-1),me=s("span",{style:{"font-weight":"400","letter-spacing":"0.65px"},class:"q-mr-xs text-capitalize"},"Add New ",-1),fe={class:"q-pl-sm full-width"},_e={class:"text-weight-medium text-h6 q-mb-xs"},ve={class:"q-mx-md q-mt-md",style:{position:"sticky",top:0,zIndex:1,background:"#e0e0e0"}},he={class:"lists q-pa-md"},ge={class:"text-weight-medium text-h6"},ye=s("span",{class:"text-weight-medium"},"Sell Price :",-1),xe=s("span",{class:"text-weight-medium"},"Cost Price :",-1),ke={class:"ellipsis"},qe=s("span",{class:"text-weight-medium"},"Stock :",-1),we=s("span",{class:"text-weight-medium"},"Unit :",-1),Qe={key:1,class:"q-mt-lg text-center"},Pe=s("p",{class:"text-center text-h5 q-py-md"},"No product available.",-1),be={class:"q-pa-md text-center"},Ce=s("span",{class:"q-ml-sm text-h5 text-center"},"Are you sure want to delete Product.",-1),Ee=Object.assign({name:"ProductLists"},{__name:"Lists",setup(Ve){const c=re(),y=W(),V=r(!1),x=r(!1),k=r(!1),S=r(0),I=r(-1),q=r(),w=r(1),N=r(1),L=r(!1),m=r(),$=(o,l)=>{S.value=o,I.value=l,x.value=!0},E=async()=>{k.value=!0;try{await c.DeleteProduct(S.value),c.products.splice(I.value,1),S.value=0,I.value=-1,x.value=!1}catch(o){console.error(o)}finally{k.value=!1}},j=async(o,l)=>{try{const a={id:o,status:l},h=await c.UpdateProductStatus(a);$q.notify({progress:!0,position:"top",message:h.message,color:"green",timeout:2e3})}catch(a){console.error(a)}finally{}},D=async()=>{const o={page:1,search:q.value};try{V.value=!0;const l=await c.FetchProducts({params:o});c.products=l.data.list,w.value=l.data.page,N.value=l.data.total_pages}finally{V.value=!1}},O=async()=>{try{const o={page:w.value+1,search:q.value};L.value=!0;const l=await c.FetchProducts({params:o});c.products=[...c.products,...l.data.list],w.value=l.data.page,N.value=l.data.total_pages}finally{L.value=!1}},R=()=>{m.value&&clearTimeout(m.value),m.value=setTimeout(()=>{D()},500)},Y=()=>{m.value&&clearTimeout(m.value),m.value=setTimeout(()=>{D()},500)},G=()=>{y.push({name:"product-create"})},H=()=>{y.replace({name:"home"})},J=(o,l)=>{y.push({name:"product-update",params:{id:o}})},K=o=>{y.push({name:"product-list-detail",params:{id:o}})};return X(()=>{D()}),(o,l)=>(d(),u(ce,{class:"aa-product-list-page"},{default:t(()=>[e(z,{unelevated:"",class:"aa-product-page"},{default:t(()=>[e(_,{class:"row items-center header-action-bar q-px-xs"},{default:t(()=>[s("div",ue,[e(v,{round:"",unelevated:"",icon:"arrow_back",onClick:H}),ie]),pe,e(v,{flat:"",color:"primary",onClick:G},{default:t(()=>[me]),_:1})]),_:1}),e(g),e(_,{style:{height:"calc(100vh - 66px)"},class:"scroll q-pa-none bg-grey-4"},{default:t(()=>[V.value?(d(),Q(B,{key:0},T(10,a=>s("div",{class:"profile-card col q-ma-md q-px-md q-py-md flex no-wrap items-center bg-white",key:a},[s("div",null,[e(U,{size:"54px"},{default:t(()=>[e(M,{height:"55px",width:"55px",square:""})]),_:1})]),s("div",fe,[s("div",_e,[e(M,{height:"30px",square:""})]),s("div",null,[e(M)])])])),64)):(d(),Q(B,{key:1},[s("div",ve,[e(Z,{outlined:"",rounded:"",dense:"",modelValue:q.value,"onUpdate:modelValue":[l[0]||(l[0]=a=>q.value=a),l[1]||(l[1]=a=>R())],onClear:Y,clearable:"",class:"search-input",placeholder:"Search Product..."},{append:t(()=>[e(ee,{name:"search"})]),_:1},8,["modelValue"])]),s("div",he,[A(c).products.length?(d(!0),Q(B,{key:0},T(A(c).products,(a,h)=>(d(),u(z,{class:"my-card q-mb-md",flat:"",bordered:"",key:"product"+h},{default:t(()=>[e(b,null,{default:t(()=>[e(p,{avatar:""},{default:t(()=>[a.images&&a.images.length?(d(),u(U,{key:0,square:""},{default:t(()=>[e(ae,{src:a.images[0].file_path},null,8,["src"])]),_:2},1024)):F("",!0)]),_:2},1024),e(p,{class:"ellipsis"},{default:t(()=>[s("div",ge,i(a.name),1),s("div",null,i(a.category?"#"+a.category:""),1)]),_:2},1024),e(p,{side:""},{default:t(()=>[e(se,{disable:!a.stock,"onUpdate:modelValue":[f=>j(a.id,f),f=>a.isPublished=f],modelValue:a.isPublished},null,8,["disable","onUpdate:modelValue","modelValue"])]),_:2},1024),e(p,{side:""},{default:t(()=>[e(v,{round:"",flat:"",color:"primary",size:"sm",icon:"more_vert"},{default:t(()=>[e(oe,null,{default:t(()=>[e(le,{dense:"",style:{"min-width":"100px"}},{default:t(()=>[P((d(),u(b,{onClick:f=>J(a.id,h),clickable:""},{default:t(()=>[e(p,null,{default:t(()=>[n("Edit")]),_:1})]),_:2},1032,["onClick"])),[[C]]),e(g),P((d(),u(b,{onClick:f=>$(a.id,h),clickable:""},{default:t(()=>[e(p,null,{default:t(()=>[n("Delete")]),_:1})]),_:2},1032,["onClick"])),[[C]]),e(g),P((d(),u(b,{onClick:f=>K(a.id),clickable:""},{default:t(()=>[e(p,null,{default:t(()=>[n("View")]),_:1})]),_:2},1032,["onClick"])),[[C]])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024),e(g),e(_,{horizontal:""},{default:t(()=>[e(_,{class:"col q-pa-sm"},{default:t(()=>[s("div",null,[ye,n(" \u20B9"+i(a.sellPrice),1)]),s("div",null,[xe,n(" \u20B9"+i(a.costPrice?a.costPrice:"--"),1)])]),_:2},1024),e(g,{vertical:""}),e(_,{class:"col q-pa-sm"},{default:t(()=>[s("div",ke,[qe,n(" "+i(a.stock?a.stock:"--"),1)]),s("div",null,[we,n(" "+i(a.uomQty)+" "+i(a.uom),1)])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)):(d(),Q("div",Qe,[e(ne),Pe]))]),s("div",be,[w.value<N.value?(d(),u(v,{key:0,class:"full-widh q-px-lg",color:"primary","no-caps":"",outline:"",unelevated:"",rounded:"",loading:L.value,onClick:O},{default:t(()=>[n(" Load More... ")]),_:1},8,["loading"])):F("",!0)])],64))]),_:1})]),_:1}),e(te,{modelValue:x.value,"onUpdate:modelValue":l[2]||(l[2]=a=>x.value=a),persistent:""},{default:t(()=>[e(z,{class:"q-pa-md"},{default:t(()=>[e(_,{class:"row items-center"},{default:t(()=>[Ce]),_:1}),e(de,{align:"center"},{default:t(()=>[P(e(v,{outline:"",disable:k.value,class:"q-mx-md",label:"No",color:"red"},null,8,["disable"]),[[C]]),e(v,{class:"q-mx-md",label:"Yes",color:"red",loading:k.value,onClick:E},null,8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});export{Ee as default};
