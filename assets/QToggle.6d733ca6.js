import{u as et,a as zt,b as Tt,c as _t,d as Bt,e as nl,f as bt,g as ol,h as ul}from"./QInput.81b63522.js";import{k as Ae,aH as Ht,aI as Ot,c as h,O as al,h as k,Y as _e,aJ as il,$ as rl,G as ae,g as Ee,l as tt,r as F,am as Ft,B as Be,N as re,z as yt,w as ee,o as sl,p as He,E as cl,a3 as Je,v as dl,ae as fl,D as vl,a0 as ml,ai as hl,aB as gl,x as Sl,H as bl,aq as yl,I as xl,J as wl,aF as Cl,aN as kl,aO as ze,C as Ve,aG as Vl,m as Lt,aP as pe}from"./index.3996516f.js";import{u as lt,a as nt}from"./use-dark.a5276646.js";import{a as pl,Q as ql}from"./QItem.3bab31b6.js";import{c as Al}from"./selection.f0b2e4ca.js";import{u as El,f as Il,a as Ml,g as zl,b as Tl,h as _l,c as Bl,i as Hl,j as Ol,r as Fl,k as xt,l as Ll,Q as Rl}from"./QDialog.745bb939.js";import{p as wt,a as Pl}from"./portal.06a3f309.js";import{b as $l}from"./focus-manager.02955f48.js";import{n as Ct}from"./format.2a3572e1.js";var Dl=Ae({name:"QField",inheritAttrs:!1,props:et,emits:zt,setup(){return Tt(_t())}});const Wl={xs:8,sm:10,md:14,lg:20,xl:24};var Kl=Ae({name:"QChip",props:{...lt,...Ht,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:n,emit:l}){const{proxy:{$q:o}}=Ee(),i=nt(e,o),u=Ot(e,Wl),r=h(()=>e.selected===!0||e.icon!==void 0),g=h(()=>e.selected===!0?e.iconSelected||o.iconSet.chip.selected:e.icon),S=h(()=>e.iconRemove||o.iconSet.chip.remove),y=h(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),s=h(()=>{const V=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(V?` text-${V} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(y.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(i.value===!0?" q-chip--dark q-dark":"")}),w=h(()=>{const V=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},D={...V,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||o.lang.label.remove};return{chip:V,remove:D}});function A(V){V.keyCode===13&&a(V)}function a(V){e.disable||(l("update:selected",!e.selected),l("click",V))}function b(V){(V.keyCode===void 0||V.keyCode===13)&&(ae(V),e.disable===!1&&(l("update:modelValue",!1),l("remove")))}function T(){const V=[];y.value===!0&&V.push(k("div",{class:"q-focus-helper"})),r.value===!0&&V.push(k(_e,{class:"q-chip__icon q-chip__icon--left",name:g.value}));const D=e.label!==void 0?[k("div",{class:"ellipsis"},[e.label])]:void 0;return V.push(k("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},il(n.default,D))),e.iconRight&&V.push(k(_e,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&V.push(k(_e,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:S.value,...w.value.remove,onClick:b,onKeyup:b})),V}return()=>{if(e.modelValue===!1)return;const V={class:s.value,style:u.value};return y.value===!0&&Object.assign(V,w.value.chip,{onClick:a,onKeyup:A}),al("div",V,T(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[rl,e.ripple]])}}}),Nl=Ae({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:n}){const l=h(()=>parseInt(e.lines,10)),o=h(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(l.value===1?" ellipsis":"")),i=h(()=>e.lines!==void 0&&l.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":l.value}:null);return()=>k("div",{style:i.value,class:o.value},tt(n.default))}});const jl={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function Ql({showing:e,avoidEmit:n,configureAnchorEl:l}){const{props:o,proxy:i,emit:u}=Ee(),r=F(null);let g=null;function S(a){return r.value===null?!1:a===void 0||a.touches===void 0||a.touches.length<=1}const y={};l===void 0&&(Object.assign(y,{hide(a){i.hide(a)},toggle(a){i.toggle(a),a.qAnchorHandled=!0},toggleKey(a){Ft(a,13)===!0&&y.toggle(a)},contextClick(a){i.hide(a),Be(a),re(()=>{i.show(a),a.qAnchorHandled=!0})},prevent:Be,mobileTouch(a){if(y.mobileCleanup(a),S(a)!==!0)return;i.hide(a),r.value.classList.add("non-selectable");const b=a.target;yt(y,"anchor",[[b,"touchmove","mobileCleanup","passive"],[b,"touchend","mobileCleanup","passive"],[b,"touchcancel","mobileCleanup","passive"],[r.value,"contextmenu","prevent","notPassive"]]),g=setTimeout(()=>{g=null,i.show(a),a.qAnchorHandled=!0},300)},mobileCleanup(a){r.value.classList.remove("non-selectable"),g!==null&&(clearTimeout(g),g=null),e.value===!0&&a!==void 0&&Al()}}),l=function(a=o.contextMenu){if(o.noParentEvent===!0||r.value===null)return;let b;a===!0?i.$q.platform.is.mobile===!0?b=[[r.value,"touchstart","mobileTouch","passive"]]:b=[[r.value,"mousedown","hide","passive"],[r.value,"contextmenu","contextClick","notPassive"]]:b=[[r.value,"click","toggle","passive"],[r.value,"keyup","toggleKey","passive"]],yt(y,"anchor",b)});function s(){cl(y,"anchor")}function w(a){for(r.value=a;r.value.classList.contains("q-anchor--skip");)r.value=r.value.parentNode;l()}function A(){if(o.target===!1||o.target===""||i.$el.parentNode===null)r.value=null;else if(o.target===!0)w(i.$el.parentNode);else{let a=o.target;if(typeof o.target=="string")try{a=document.querySelector(o.target)}catch{a=void 0}a!=null?(r.value=a.$el||a,l()):(r.value=null,console.error(`Anchor: target "${o.target}" not found`))}}return ee(()=>o.contextMenu,a=>{r.value!==null&&(s(),l(a))}),ee(()=>o.target,()=>{r.value!==null&&s(),A()}),ee(()=>o.noParentEvent,a=>{r.value!==null&&(a===!0?s():l())}),sl(()=>{A(),n!==!0&&o.modelValue===!0&&r.value===null&&u("update:modelValue",!1)}),He(()=>{g!==null&&clearTimeout(g),s()}),{anchorEl:r,canShow:S,anchorEvents:y}}function Ul(e,n){const l=F(null);let o;function i(g,S){const y=`${S!==void 0?"add":"remove"}EventListener`,s=S!==void 0?S:o;g!==window&&g[y]("scroll",s,Je.passive),window[y]("scroll",s,Je.passive),o=S}function u(){l.value!==null&&(i(l.value),l.value=null)}const r=ee(()=>e.noParentEvent,()=>{l.value!==null&&(u(),n())});return He(r),{localScrollTarget:l,unconfigureScrollTarget:u,changeScrollEvent:i}}const{notPassiveCapture:$e}=Je,he=[];function De(e){const n=e.target;if(n===void 0||n.nodeType===8||n.classList.contains("no-pointer-events")===!0)return;let l=wt.length-1;for(;l>=0;){const o=wt[l].$;if(o.type.name==="QTooltip"){l--;continue}if(o.type.name!=="QDialog")break;if(o.props.seamless!==!0)return;l--}for(let o=he.length-1;o>=0;o--){const i=he[o];if((i.anchorEl.value===null||i.anchorEl.value.contains(n)===!1)&&(n===document.body||i.innerRef.value!==null&&i.innerRef.value.contains(n)===!1))e.qClickOutside=!0,i.onClickOutside(e);else return}}function Xl(e){he.push(e),he.length===1&&(document.addEventListener("mousedown",De,$e),document.addEventListener("touchstart",De,$e))}function kt(e){const n=he.findIndex(l=>l===e);n>-1&&(he.splice(n,1),he.length===0&&(document.removeEventListener("mousedown",De,$e),document.removeEventListener("touchstart",De,$e)))}let Vt,pt;function qt(e){const n=e.split(" ");return n.length!==2?!1:["top","center","bottom"].includes(n[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(n[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Yl(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const Ze={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{Ze[`${e}#ltr`]=e,Ze[`${e}#rtl`]=e});function At(e,n){const l=e.split(" ");return{vertical:l[0],horizontal:Ze[`${l[1]}#${n===!0?"rtl":"ltr"}`]}}function Gl(e,n){let{top:l,left:o,right:i,bottom:u,width:r,height:g}=e.getBoundingClientRect();return n!==void 0&&(l-=n[1],o-=n[0],u+=n[1],i+=n[0],r+=n[0],g+=n[1]),{top:l,bottom:u,height:g,left:o,right:i,width:r,middle:o+(i-o)/2,center:l+(u-l)/2}}function Jl(e,n,l){let{top:o,left:i}=e.getBoundingClientRect();return o+=n.top,i+=n.left,l!==void 0&&(o+=l[1],i+=l[0]),{top:o,bottom:o+1,height:1,left:i,right:i+1,width:1,middle:i,center:o}}function Zl(e,n){return{top:0,center:n/2,bottom:n,left:0,middle:e/2,right:e}}function Et(e,n,l,o){return{top:e[l.vertical]-n[o.vertical],left:e[l.horizontal]-n[o.horizontal]}}function Rt(e,n=0){if(e.targetEl===null||e.anchorEl===null||n>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{Rt(e,n+1)},10);return}const{targetEl:l,offset:o,anchorEl:i,anchorOrigin:u,selfOrigin:r,absoluteOffset:g,fit:S,cover:y,maxHeight:s,maxWidth:w}=e;if(dl.is.ios===!0&&window.visualViewport!==void 0){const W=document.body.style,{offsetLeft:L,offsetTop:K}=window.visualViewport;L!==Vt&&(W.setProperty("--q-pe-left",L+"px"),Vt=L),K!==pt&&(W.setProperty("--q-pe-top",K+"px"),pt=K)}const{scrollLeft:A,scrollTop:a}=l,b=g===void 0?Gl(i,y===!0?[0,0]:o):Jl(i,g,o);Object.assign(l.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:w||"100vw",maxHeight:s||"100vh",visibility:"visible"});const{offsetWidth:T,offsetHeight:V}=l,{elWidth:D,elHeight:P}=S===!0||y===!0?{elWidth:Math.max(b.width,T),elHeight:y===!0?Math.max(b.height,V):V}:{elWidth:T,elHeight:V};let O={maxWidth:w,maxHeight:s};(S===!0||y===!0)&&(O.minWidth=b.width+"px",y===!0&&(O.minHeight=b.height+"px")),Object.assign(l.style,O);const z=Zl(D,P);let E=Et(b,z,u,r);if(g===void 0||o===void 0)Ye(E,b,z,u,r);else{const{top:W,left:L}=E;Ye(E,b,z,u,r);let K=!1;if(E.top!==W){K=!0;const U=2*o[1];b.center=b.top-=U,b.bottom-=U+2}if(E.left!==L){K=!0;const U=2*o[0];b.middle=b.left-=U,b.right-=U+2}K===!0&&(E=Et(b,z,u,r),Ye(E,b,z,u,r))}O={top:E.top+"px",left:E.left+"px"},E.maxHeight!==void 0&&(O.maxHeight=E.maxHeight+"px",b.height>E.maxHeight&&(O.minHeight=O.maxHeight)),E.maxWidth!==void 0&&(O.maxWidth=E.maxWidth+"px",b.width>E.maxWidth&&(O.minWidth=O.maxWidth)),Object.assign(l.style,O),l.scrollTop!==a&&(l.scrollTop=a),l.scrollLeft!==A&&(l.scrollLeft=A)}function Ye(e,n,l,o,i){const u=l.bottom,r=l.right,g=fl(),S=window.innerHeight-g,y=document.body.clientWidth;if(e.top<0||e.top+u>S)if(i.vertical==="center")e.top=n[o.vertical]>S/2?Math.max(0,S-u):0,e.maxHeight=Math.min(u,S);else if(n[o.vertical]>S/2){const s=Math.min(S,o.vertical==="center"?n.center:o.vertical===i.vertical?n.bottom:n.top);e.maxHeight=Math.min(u,s),e.top=Math.max(0,s-u)}else e.top=Math.max(0,o.vertical==="center"?n.center:o.vertical===i.vertical?n.top:n.bottom),e.maxHeight=Math.min(u,S-e.top);if(e.left<0||e.left+r>y)if(e.maxWidth=Math.min(r,y),i.horizontal==="middle")e.left=n[o.horizontal]>y/2?Math.max(0,y-r):0;else if(n[o.horizontal]>y/2){const s=Math.min(y,o.horizontal==="middle"?n.middle:o.horizontal===i.horizontal?n.right:n.left);e.maxWidth=Math.min(r,s),e.left=Math.max(0,s-e.maxWidth)}else e.left=Math.max(0,o.horizontal==="middle"?n.middle:o.horizontal===i.horizontal?n.left:n.right),e.maxWidth=Math.min(r,y-e.left)}var en=Ae({name:"QMenu",inheritAttrs:!1,props:{...jl,...El,...lt,...Il,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:qt},self:{type:String,validator:qt},offset:{type:Array,validator:Yl},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Ml,"click","escapeKey"],setup(e,{slots:n,emit:l,attrs:o}){let i=null,u,r,g;const S=Ee(),{proxy:y}=S,{$q:s}=y,w=F(null),A=F(!1),a=h(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),b=nt(e,s),{registerTick:T,removeTick:V}=zl(),{registerTimeout:D}=Tl(),{transitionProps:P,transitionStyle:O}=_l(e),{localScrollTarget:z,changeScrollEvent:E,unconfigureScrollTarget:W}=Ul(e,q),{anchorEl:L,canShow:K}=Ql({showing:A}),{hide:U}=Bl({showing:A,canShow:K,handleShow:m,handleHide:f,hideOnRouteChange:a,processOnMount:!0}),{showPortal:Z,hidePortal:X,renderPortal:I}=Hl(S,w,N,"menu"),Q={anchorEl:L,innerRef:w,onClickOutside(c){if(e.persistent!==!0&&A.value===!0)return U(c),(c.type==="touchstart"||c.target.classList.contains("q-dialog__backdrop"))&&ae(c),!0}},te=h(()=>At(e.anchor||(e.cover===!0?"center middle":"bottom start"),s.lang.rtl)),ie=h(()=>e.cover===!0?te.value:At(e.self||"top start",s.lang.rtl)),ne=h(()=>(e.square===!0?" q-menu--square":"")+(b.value===!0?" q-menu--dark q-dark":"")),ge=h(()=>e.autoClose===!0?{onClick:B}:{}),se=h(()=>A.value===!0&&e.persistent!==!0);ee(se,c=>{c===!0?(Ll(M),Xl(Q)):(xt(M),kt(Q))});function oe(){$l(()=>{let c=w.value;c&&c.contains(document.activeElement)!==!0&&(c=c.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||c.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||c.querySelector("[autofocus], [data-autofocus]")||c,c.focus({preventScroll:!0}))})}function m(c){if(i=e.noRefocus===!1?document.activeElement:null,Ol($),Z(),q(),u=void 0,c!==void 0&&(e.touchPosition||e.contextMenu)){const j=vl(c);if(j.left!==void 0){const{top:ce,left:de}=L.value.getBoundingClientRect();u={left:j.left-de,top:j.top-ce}}}r===void 0&&(r=ee(()=>s.screen.width+"|"+s.screen.height+"|"+e.self+"|"+e.anchor+"|"+s.lang.rtl,C)),e.noFocus!==!0&&document.activeElement.blur(),T(()=>{C(),e.noFocus!==!0&&oe()}),D(()=>{s.platform.is.ios===!0&&(g=e.autoClose,w.value.click()),C(),Z(!0),l("show",c)},e.transitionDuration)}function f(c){V(),X(),x(!0),i!==null&&(c===void 0||c.qClickOutside!==!0)&&(((c&&c.type.indexOf("key")===0?i.closest('[tabindex]:not([tabindex^="-"])'):void 0)||i).focus(),i=null),D(()=>{X(!0),l("hide",c)},e.transitionDuration)}function x(c){u=void 0,r!==void 0&&(r(),r=void 0),(c===!0||A.value===!0)&&(Fl($),W(),kt(Q),xt(M)),c!==!0&&(i=null)}function q(){(L.value!==null||e.scrollTarget!==void 0)&&(z.value=ml(L.value,e.scrollTarget),E(z.value,C))}function B(c){g!==!0?(Pl(y,c),l("click",c)):g=!1}function $(c){se.value===!0&&e.noFocus!==!0&&gl(w.value,c.target)!==!0&&oe()}function M(c){l("escapeKey"),U(c)}function C(){Rt({targetEl:w.value,offset:e.offset,anchorEl:L.value,anchorOrigin:te.value,selfOrigin:ie.value,absoluteOffset:u,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function N(){return k(hl,P.value,()=>A.value===!0?k("div",{role:"menu",...o,ref:w,tabindex:-1,class:["q-menu q-position-engine scroll"+ne.value,o.class],style:[o.style,O.value],...ge.value},tt(n.default)):null)}return He(x),Object.assign(y,{focus:oe,updatePosition:C}),I}});let We=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const n=document.createElement("div");Object.assign(n.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(n),e.scrollLeft=-1e3,We=e.scrollLeft>=0,e.remove()}const le=1e3,tn=["start","center","end","start-force","center-force","end-force"],Pt=Array.prototype.filter,ln=window.getComputedStyle(document.body).overflowAnchor===void 0?Sl:function(e,n){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const l=e.children||[];Pt.call(l,i=>i.dataset&&i.dataset.qVsAnchor!==void 0).forEach(i=>{delete i.dataset.qVsAnchor});const o=l[n];o&&o.dataset&&(o.dataset.qVsAnchor="")}))};function qe(e,n){return e+n}function Ge(e,n,l,o,i,u,r,g){const S=e===window?document.scrollingElement||document.documentElement:e,y=i===!0?"offsetWidth":"offsetHeight",s={scrollStart:0,scrollViewSize:-r-g,scrollMaxSize:0,offsetStart:-r,offsetEnd:-g};if(i===!0?(e===window?(s.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,s.scrollViewSize+=document.documentElement.clientWidth):(s.scrollStart=S.scrollLeft,s.scrollViewSize+=S.clientWidth),s.scrollMaxSize=S.scrollWidth,u===!0&&(s.scrollStart=(We===!0?s.scrollMaxSize-s.scrollViewSize:0)-s.scrollStart)):(e===window?(s.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,s.scrollViewSize+=document.documentElement.clientHeight):(s.scrollStart=S.scrollTop,s.scrollViewSize+=S.clientHeight),s.scrollMaxSize=S.scrollHeight),l!==null)for(let w=l.previousElementSibling;w!==null;w=w.previousElementSibling)w.classList.contains("q-virtual-scroll--skip")===!1&&(s.offsetStart+=w[y]);if(o!==null)for(let w=o.nextElementSibling;w!==null;w=w.nextElementSibling)w.classList.contains("q-virtual-scroll--skip")===!1&&(s.offsetEnd+=w[y]);if(n!==e){const w=S.getBoundingClientRect(),A=n.getBoundingClientRect();i===!0?(s.offsetStart+=A.left-w.left,s.offsetEnd-=A.width):(s.offsetStart+=A.top-w.top,s.offsetEnd-=A.height),e!==window&&(s.offsetStart+=s.scrollStart),s.offsetEnd+=s.scrollMaxSize-s.offsetStart}return s}function It(e,n,l,o){n==="end"&&(n=(e===window?document.body:e)[l===!0?"scrollWidth":"scrollHeight"]),e===window?l===!0?(o===!0&&(n=(We===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-n),window.scrollTo(n,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,n):l===!0?(o===!0&&(n=(We===!0?e.scrollWidth-e.offsetWidth:0)-n),e.scrollLeft=n):e.scrollTop=n}function Te(e,n,l,o){if(l>=o)return 0;const i=n.length,u=Math.floor(l/le),r=Math.floor((o-1)/le)+1;let g=e.slice(u,r).reduce(qe,0);return l%le!==0&&(g-=n.slice(u*le,l).reduce(qe,0)),o%le!==0&&o!==i&&(g-=n.slice(o,r*le).reduce(qe,0)),g}const nn={virtualScrollSliceSize:{type:[Number,String],default:null},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},on={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...nn};function un({virtualScrollLength:e,getVirtualScrollTarget:n,getVirtualScrollEl:l,virtualScrollItemSizeComputed:o}){const i=Ee(),{props:u,emit:r,proxy:g}=i,{$q:S}=g;let y,s,w,A=[],a;const b=F(0),T=F(0),V=F({}),D=F(null),P=F(null),O=F(null),z=F({from:0,to:0}),E=h(()=>u.tableColspan!==void 0?u.tableColspan:100);o===void 0&&(o=h(()=>u.virtualScrollItemSize));const W=h(()=>o.value+";"+u.virtualScrollHorizontal),L=h(()=>W.value+";"+u.virtualScrollSliceRatioBefore+";"+u.virtualScrollSliceRatioAfter);ee(L,()=>{ne()}),ee(W,K);function K(){ie(s,!0)}function U(f){ie(f===void 0?s:f)}function Z(f,x){const q=n();if(q==null||q.nodeType===8)return;const B=Ge(q,l(),D.value,P.value,u.virtualScrollHorizontal,S.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd);w!==B.scrollViewSize&&ne(B.scrollViewSize),I(q,B,Math.min(e.value-1,Math.max(0,parseInt(f,10)||0)),0,tn.indexOf(x)>-1?x:s>-1&&f>s?"end":"start")}function X(){const f=n();if(f==null||f.nodeType===8)return;const x=Ge(f,l(),D.value,P.value,u.virtualScrollHorizontal,S.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd),q=e.value-1,B=x.scrollMaxSize-x.offsetStart-x.offsetEnd-T.value;if(y===x.scrollStart)return;if(x.scrollMaxSize<=0){I(f,x,0,0);return}w!==x.scrollViewSize&&ne(x.scrollViewSize),Q(z.value.from);const $=Math.floor(x.scrollMaxSize-Math.max(x.scrollViewSize,x.offsetEnd)-Math.min(a[q],x.scrollViewSize/2));if($>0&&Math.ceil(x.scrollStart)>=$){I(f,x,q,x.scrollMaxSize-x.offsetEnd-A.reduce(qe,0));return}let M=0,C=x.scrollStart-x.offsetStart,N=C;if(C<=B&&C+x.scrollViewSize>=b.value)C-=b.value,M=z.value.from,N=C;else for(let c=0;C>=A[c]&&M<q;c++)C-=A[c],M+=le;for(;C>0&&M<q;)C-=a[M],C>-x.scrollViewSize?(M++,N=C):N=a[M]+C;I(f,x,M,N)}function I(f,x,q,B,$){const M=typeof $=="string"&&$.indexOf("-force")>-1,C=M===!0?$.replace("-force",""):$,N=C!==void 0?C:"start";let c=Math.max(0,q-V.value[N]),j=c+V.value.total;j>e.value&&(j=e.value,c=Math.max(0,j-V.value.total)),y=x.scrollStart;const ce=c!==z.value.from||j!==z.value.to;if(ce===!1&&C===void 0){se(q);return}const{activeElement:de}=document,ue=O.value;ce===!0&&ue!==null&&ue!==de&&ue.contains(de)===!0&&(ue.addEventListener("focusout",te),setTimeout(()=>{ue!==null&&ue.removeEventListener("focusout",te)})),ln(ue,q-c);const Oe=C!==void 0?a.slice(c,q).reduce(qe,0):0;if(ce===!0){const fe=j>=z.value.from&&c<=z.value.to?z.value.to:j;z.value={from:c,to:fe},b.value=Te(A,a,0,c),T.value=Te(A,a,j,e.value),requestAnimationFrame(()=>{z.value.to!==j&&y===x.scrollStart&&(z.value={from:z.value.from,to:j},T.value=Te(A,a,j,e.value))})}requestAnimationFrame(()=>{if(y!==x.scrollStart)return;ce===!0&&Q(c);const fe=a.slice(c,q).reduce(qe,0),Se=fe+x.offsetStart+b.value,Fe=Se+a[q];let Ie=Se+B;if(C!==void 0){const Ke=fe-Oe,G=x.scrollStart+Ke;Ie=M!==!0&&G<Se&&Fe<G+x.scrollViewSize?G:C==="end"?Fe-x.scrollViewSize:Se-(C==="start"?0:Math.round((x.scrollViewSize-a[q])/2))}y=Ie,It(f,Ie,u.virtualScrollHorizontal,S.lang.rtl),se(q)})}function Q(f){const x=O.value;if(x){const q=Pt.call(x.children,c=>c.classList&&c.classList.contains("q-virtual-scroll--skip")===!1),B=q.length,$=u.virtualScrollHorizontal===!0?c=>c.getBoundingClientRect().width:c=>c.offsetHeight;let M=f,C,N;for(let c=0;c<B;){for(C=$(q[c]),c++;c<B&&q[c].classList.contains("q-virtual-scroll--with-prev")===!0;)C+=$(q[c]),c++;N=C-a[M],N!==0&&(a[M]+=N,A[Math.floor(M/le)]+=N),M++}}}function te(){O.value!==null&&O.value!==void 0&&O.value.focus()}function ie(f,x){const q=1*o.value;(x===!0||Array.isArray(a)===!1)&&(a=[]);const B=a.length;a.length=e.value;for(let M=e.value-1;M>=B;M--)a[M]=q;const $=Math.floor((e.value-1)/le);A=[];for(let M=0;M<=$;M++){let C=0;const N=Math.min((M+1)*le,e.value);for(let c=M*le;c<N;c++)C+=a[c];A.push(C)}s=-1,y=void 0,b.value=Te(A,a,0,z.value.from),T.value=Te(A,a,z.value.to,e.value),f>=0?(Q(z.value.from),re(()=>{Z(f)})):oe()}function ne(f){if(f===void 0&&typeof window!="undefined"){const C=n();C!=null&&C.nodeType!==8&&(f=Ge(C,l(),D.value,P.value,u.virtualScrollHorizontal,S.lang.rtl,u.virtualScrollStickySizeStart,u.virtualScrollStickySizeEnd).scrollViewSize)}w=f;const x=parseFloat(u.virtualScrollSliceRatioBefore)||0,q=parseFloat(u.virtualScrollSliceRatioAfter)||0,B=1+x+q,$=f===void 0||f<=0?1:Math.ceil(f/o.value),M=Math.max(1,$,Math.ceil((u.virtualScrollSliceSize>0?u.virtualScrollSliceSize:10)/B));V.value={total:Math.ceil(M*B),start:Math.ceil(M*x),center:Math.ceil(M*(.5+x)),end:Math.ceil(M*(1+x)),view:$}}function ge(f,x){const q=u.virtualScrollHorizontal===!0?"width":"height",B={["--q-virtual-scroll-item-"+q]:o.value+"px"};return[f==="tbody"?k(f,{class:"q-virtual-scroll__padding",key:"before",ref:D},[k("tr",[k("td",{style:{[q]:`${b.value}px`,...B},colspan:E.value})])]):k(f,{class:"q-virtual-scroll__padding",key:"before",ref:D,style:{[q]:`${b.value}px`,...B}}),k(f,{class:"q-virtual-scroll__content",key:"content",ref:O,tabindex:-1},x.flat()),f==="tbody"?k(f,{class:"q-virtual-scroll__padding",key:"after",ref:P},[k("tr",[k("td",{style:{[q]:`${T.value}px`,...B},colspan:E.value})])]):k(f,{class:"q-virtual-scroll__padding",key:"after",ref:P,style:{[q]:`${T.value}px`,...B}})]}function se(f){s!==f&&(u.onVirtualScroll!==void 0&&r("virtualScroll",{index:f,from:z.value.from,to:z.value.to-1,direction:f<s?"decrease":"increase",ref:g}),s=f)}ne();const oe=bl(X,S.platform.is.ios===!0?120:35);yl(()=>{ne()});let m=!1;return xl(()=>{m=!0}),wl(()=>{if(m!==!0)return;const f=n();y!==void 0&&f!==void 0&&f!==null&&f.nodeType!==8?It(f,y,u.virtualScrollHorizontal,S.lang.rtl):Z(s)}),He(()=>{oe.cancel()}),Object.assign(g,{scrollTo:Z,reset:K,refresh:U}),{virtualScrollSliceRange:z,virtualScrollSliceSizeComputed:V,setVirtualScrollSize:ne,onVirtualScrollEvt:oe,localResetVirtualScroll:ie,padVirtualScroll:ge,scrollTo:Z,reset:K,refresh:U}}const Mt=e=>["add","add-unique","toggle"].includes(e),an=".*+?^${}()|[]\\",rn=Object.keys(et);var kn=Ae({name:"QSelect",inheritAttrs:!1,props:{...on,...Bt,...et,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:Mt},mapOptions:Boolean,emitValue:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:String,transitionHide:String,transitionDuration:[String,Number],behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:{type:[Number,String],default:void 0},onNewValue:Function,onFilter:Function},emits:[...zt,"add","remove","inputValue","newValue","keyup","keypress","keydown","filterAbort"],setup(e,{slots:n,emit:l}){const{proxy:o}=Ee(),{$q:i}=o,u=F(!1),r=F(!1),g=F(-1),S=F(""),y=F(!1),s=F(!1);let w=null,A,a,b,T=null,V,D,P,O;const z=F(null),E=F(null),W=F(null),L=F(null),K=F(null),U=nl(e),Z=ol(vt),X=h(()=>Array.isArray(e.options)?e.options.length:0),I=h(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:Q,virtualScrollSliceSizeComputed:te,localResetVirtualScroll:ie,padVirtualScroll:ne,onVirtualScrollEvt:ge,scrollTo:se,setVirtualScrollSize:oe}=un({virtualScrollLength:X,getVirtualScrollTarget:Kt,getVirtualScrollEl:dt,virtualScrollItemSizeComputed:I}),m=_t(),f=h(()=>{const t=e.mapOptions===!0&&e.multiple!==!0,v=e.modelValue!==void 0&&(e.modelValue!==null||t===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const d=e.mapOptions===!0&&A!==void 0?A:[],p=v.map(H=>Wt(H,d));return e.modelValue===null&&t===!0?p.filter(H=>H!==null):p}return v}),x=h(()=>{const t={};return rn.forEach(v=>{const d=e[v];d!==void 0&&(t[v]=d)}),t}),q=h(()=>e.optionsDark===null?m.isDark.value:e.optionsDark),B=h(()=>bt(f.value)),$=h(()=>{let t="q-field__input q-placeholder col";return e.hideSelected===!0||f.value.length===0?[t,e.inputClass]:(t+=" q-field__input--padding",e.inputClass===void 0?t:[t,e.inputClass])}),M=h(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),C=h(()=>X.value===0),N=h(()=>f.value.map(t=>J.value(t)).join(", ")),c=h(()=>e.displayValue!==void 0?e.displayValue:N.value),j=h(()=>e.optionsHtml===!0?()=>!0:t=>t!=null&&t.html===!0),ce=h(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||f.value.some(j.value))),de=h(()=>m.focused.value===!0?e.tabindex:-1),ue=h(()=>{const t={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":u.value===!0?"true":"false","aria-controls":`${m.targetUid.value}_lb`};return g.value>=0&&(t["aria-activedescendant"]=`${m.targetUid.value}_${g.value}`),t}),Oe=h(()=>({id:`${m.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),fe=h(()=>f.value.map((t,v)=>({index:v,opt:t,html:j.value(t),selected:!0,removeAtIndex:Dt,toggleOption:ve,tabindex:de.value}))),Se=h(()=>{if(X.value===0)return[];const{from:t,to:v}=Q.value;return e.options.slice(t,v).map((d,p)=>{const H=be.value(d)===!0,_=t+p,R={clickable:!0,active:!1,activeClass:Ke.value,manualFocus:!0,focused:!1,disable:H,tabindex:-1,dense:e.optionsDense,dark:q.value,role:"option",id:`${m.targetUid.value}_${_}`,onClick:()=>{ve(d)}};return H!==!0&&(Qe(d)===!0&&(R.active=!0),g.value===_&&(R.focused=!0),R["aria-selected"]=R.active===!0?"true":"false",i.platform.is.desktop===!0&&(R.onMousemove=()=>{u.value===!0&&ye(_)})),{index:_,opt:d,html:j.value(d),label:J.value(d),selected:R.active,focused:R.focused,toggleOption:ve,setOptionIndex:ye,itemProps:R}})}),Fe=h(()=>e.dropdownIcon!==void 0?e.dropdownIcon:i.iconSet.arrow.dropdown),Ie=h(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),Ke=h(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),G=h(()=>je(e.optionValue,"value")),J=h(()=>je(e.optionLabel,"label")),be=h(()=>je(e.optionDisable,"disable")),Le=h(()=>f.value.map(t=>G.value(t))),$t=h(()=>{const t={onInput:vt,onChange:Z,onKeydown:ct,onKeyup:rt,onKeypress:st,onFocus:at,onClick(v){a===!0&&Ve(v)}};return t.onCompositionstart=t.onCompositionupdate=t.onCompositionend=Z,t});ee(f,t=>{A=t,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&m.innerLoading.value!==!0&&(r.value!==!0&&u.value!==!0||B.value!==!0)&&(b!==!0&&ke(),(r.value===!0||u.value===!0)&&xe(""))},{immediate:!0}),ee(()=>e.fillInput,ke),ee(u,Ue),ee(X,ll);function ot(t){return e.emitValue===!0?G.value(t):t}function Ne(t){if(t>-1&&t<f.value.length)if(e.multiple===!0){const v=e.modelValue.slice();l("remove",{index:t,value:v.splice(t,1)[0]}),l("update:modelValue",v)}else l("update:modelValue",null)}function Dt(t){Ne(t),m.focus()}function ut(t,v){const d=ot(t);if(e.multiple!==!0){e.fillInput===!0&&Me(J.value(t),!0,!0),l("update:modelValue",d);return}if(f.value.length===0){l("add",{index:0,value:d}),l("update:modelValue",e.multiple===!0?[d]:d);return}if(v===!0&&Qe(t)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const p=e.modelValue.slice();l("add",{index:p.length,value:d}),p.push(d),l("update:modelValue",p)}function ve(t,v){if(m.editable.value!==!0||t===void 0||be.value(t)===!0)return;const d=G.value(t);if(e.multiple!==!0){v!==!0&&(Me(e.fillInput===!0?J.value(t):"",!0,!0),me()),E.value!==null&&E.value.focus(),(f.value.length===0||ze(G.value(f.value[0]),d)!==!0)&&l("update:modelValue",e.emitValue===!0?d:t);return}if((a!==!0||y.value===!0)&&m.focus(),at(),f.value.length===0){const _=e.emitValue===!0?d:t;l("add",{index:0,value:_}),l("update:modelValue",e.multiple===!0?[_]:_);return}const p=e.modelValue.slice(),H=Le.value.findIndex(_=>ze(_,d));if(H>-1)l("remove",{index:H,value:p.splice(H,1)[0]});else{if(e.maxValues!==void 0&&p.length>=e.maxValues)return;const _=e.emitValue===!0?d:t;l("add",{index:p.length,value:_}),p.push(_)}l("update:modelValue",p)}function ye(t){if(i.platform.is.desktop!==!0)return;const v=t>-1&&t<X.value?t:-1;g.value!==v&&(g.value=v)}function Re(t=1,v){if(u.value===!0){let d=g.value;do d=Ct(d+t,-1,X.value-1);while(d!==-1&&d!==g.value&&be.value(e.options[d])===!0);g.value!==d&&(ye(d),se(d),v!==!0&&e.useInput===!0&&e.fillInput===!0&&Pe(d>=0?J.value(e.options[d]):V))}}function Wt(t,v){const d=p=>ze(G.value(p),t);return e.options.find(d)||v.find(d)||t}function je(t,v){const d=t!==void 0?t:v;return typeof d=="function"?d:p=>p!==null&&typeof p=="object"&&d in p?p[d]:p}function Qe(t){const v=G.value(t);return Le.value.find(d=>ze(d,v))!==void 0}function at(t){e.useInput===!0&&E.value!==null&&(t===void 0||E.value===t.target&&t.target.value===N.value)&&E.value.select()}function it(t){Ft(t,27)===!0&&u.value===!0&&(Ve(t),me(),ke()),l("keyup",t)}function rt(t){const{value:v}=t.target;if(t.keyCode!==void 0){it(t);return}if(t.target.value="",w!==null&&(clearTimeout(w),w=null),ke(),typeof v=="string"&&v.length!==0){const d=v.toLocaleLowerCase(),p=_=>{const R=e.options.find(Y=>_.value(Y).toLocaleLowerCase()===d);return R===void 0?!1:(f.value.indexOf(R)===-1?ve(R):me(),!0)},H=_=>{p(G)!==!0&&(p(J)===!0||_===!0||xe(v,!0,()=>H(!0)))};H()}else m.clearValue(t)}function st(t){l("keypress",t)}function ct(t){if(l("keydown",t),Vl(t)===!0)return;const v=S.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),d=t.shiftKey!==!0&&e.multiple!==!0&&(g.value>-1||v===!0);if(t.keyCode===27){Be(t);return}if(t.keyCode===9&&d===!1){we();return}if(t.target===void 0||t.target.id!==m.targetUid.value||m.editable.value!==!0)return;if(t.keyCode===40&&m.innerLoading.value!==!0&&u.value===!1){ae(t),Ce();return}if(t.keyCode===8&&e.hideSelected!==!0&&S.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?Ne(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&l("update:modelValue",null);return}(t.keyCode===35||t.keyCode===36)&&(typeof S.value!="string"||S.value.length===0)&&(ae(t),g.value=-1,Re(t.keyCode===36?1:-1,e.multiple)),(t.keyCode===33||t.keyCode===34)&&te.value!==void 0&&(ae(t),g.value=Math.max(-1,Math.min(X.value,g.value+(t.keyCode===33?-1:1)*te.value.view)),Re(t.keyCode===33?1:-1,e.multiple)),(t.keyCode===38||t.keyCode===40)&&(ae(t),Re(t.keyCode===38?-1:1,e.multiple));const p=X.value;if((P===void 0||O<Date.now())&&(P=""),p>0&&e.useInput!==!0&&t.key!==void 0&&t.key.length===1&&t.altKey===!1&&t.ctrlKey===!1&&t.metaKey===!1&&(t.keyCode!==32||P.length!==0)){u.value!==!0&&Ce(t);const H=t.key.toLocaleLowerCase(),_=P.length===1&&P[0]===H;O=Date.now()+1500,_===!1&&(ae(t),P+=H);const R=new RegExp("^"+P.split("").map(Xe=>an.indexOf(Xe)>-1?"\\"+Xe:Xe).join(".*"),"i");let Y=g.value;if(_===!0||Y<0||R.test(J.value(e.options[Y]))!==!0)do Y=Ct(Y+1,-1,p-1);while(Y!==g.value&&(be.value(e.options[Y])===!0||R.test(J.value(e.options[Y]))!==!0));g.value!==Y&&re(()=>{ye(Y),se(Y),Y>=0&&e.useInput===!0&&e.fillInput===!0&&Pe(J.value(e.options[Y]))});return}if(!(t.keyCode!==13&&(t.keyCode!==32||e.useInput===!0||P!=="")&&(t.keyCode!==9||d===!1))){if(t.keyCode!==9&&ae(t),g.value>-1&&g.value<p){ve(e.options[g.value]);return}if(v===!0){const H=(_,R)=>{if(R){if(Mt(R)!==!0)return}else R=e.newValueMode;if(Me("",e.multiple!==!0,!0),_==null)return;(R==="toggle"?ve:ut)(_,R==="add-unique"),e.multiple!==!0&&(E.value!==null&&E.value.focus(),me())};if(e.onNewValue!==void 0?l("newValue",S.value,H):H(S.value),e.multiple!==!0)return}u.value===!0?we():m.innerLoading.value!==!0&&Ce()}}function dt(){return a===!0?K.value:W.value!==null&&W.value.contentEl!==null?W.value.contentEl:void 0}function Kt(){return dt()}function Nt(){return e.hideSelected===!0?[]:n["selected-item"]!==void 0?fe.value.map(t=>n["selected-item"](t)).slice():n.selected!==void 0?[].concat(n.selected()):e.useChips===!0?fe.value.map((t,v)=>k(Kl,{key:"option-"+v,removable:m.editable.value===!0&&be.value(t.opt)!==!0,dense:!0,textColor:e.color,tabindex:de.value,onRemove(){t.removeAtIndex(v)}},()=>k("span",{class:"ellipsis",[t.html===!0?"innerHTML":"textContent"]:J.value(t.opt)}))):[k("span",{[ce.value===!0?"innerHTML":"textContent"]:c.value})]}function ft(){if(C.value===!0)return n["no-option"]!==void 0?n["no-option"]({inputValue:S.value}):void 0;const t=n.option!==void 0?n.option:d=>k(ql,{key:d.index,...d.itemProps},()=>k(pl,()=>k(Nl,()=>k("span",{[d.html===!0?"innerHTML":"textContent"]:d.label}))));let v=ne("div",Se.value.map(t));return n["before-options"]!==void 0&&(v=n["before-options"]().concat(v)),Lt(n["after-options"],v)}function jt(t,v){const d=v===!0?{...ue.value,...m.splitAttrs.attributes.value}:void 0,p={ref:v===!0?E:void 0,key:"i_t",class:$.value,style:e.inputStyle,value:S.value!==void 0?S.value:"",type:"search",...d,id:v===!0?m.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":t===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...$t.value};return t!==!0&&a===!0&&(Array.isArray(p.class)===!0?p.class=[...p.class,"no-pointer-events"]:p.class+=" no-pointer-events"),k("input",p)}function vt(t){w!==null&&(clearTimeout(w),w=null),!(t&&t.target&&t.target.qComposing===!0)&&(Pe(t.target.value||""),b=!0,V=S.value,m.focused.value!==!0&&(a!==!0||y.value===!0)&&m.focus(),e.onFilter!==void 0&&(w=setTimeout(()=>{w=null,xe(S.value)},e.inputDebounce)))}function Pe(t){S.value!==t&&(S.value=t,l("inputValue",t))}function Me(t,v,d){b=d!==!0,e.useInput===!0&&(Pe(t),(v===!0||d!==!0)&&(V=t),v!==!0&&xe(t))}function xe(t,v,d){if(e.onFilter===void 0||v!==!0&&m.focused.value!==!0)return;m.innerLoading.value===!0?l("filterAbort"):(m.innerLoading.value=!0,s.value=!0),t!==""&&e.multiple!==!0&&f.value.length!==0&&b!==!0&&t===J.value(f.value[0])&&(t="");const p=setTimeout(()=>{u.value===!0&&(u.value=!1)},10);T!==null&&clearTimeout(T),T=p,l("filter",t,(H,_)=>{(v===!0||m.focused.value===!0)&&T===p&&(clearTimeout(T),typeof H=="function"&&H(),s.value=!1,re(()=>{m.innerLoading.value=!1,m.editable.value===!0&&(v===!0?u.value===!0&&me():u.value===!0?Ue(!0):u.value=!0),typeof _=="function"&&re(()=>{_(o)}),typeof d=="function"&&re(()=>{d(o)})}))},()=>{m.focused.value===!0&&T===p&&(clearTimeout(T),m.innerLoading.value=!1,s.value=!1),u.value===!0&&(u.value=!1)})}function Qt(){return k(en,{ref:W,class:M.value,style:e.popupContentStyle,modelValue:u.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&C.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:q.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,square:Ie.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Oe.value,onScrollPassive:ge,onBeforeShow:ht,onBeforeHide:Ut,onShow:Xt},ft)}function Ut(t){gt(t),we()}function Xt(){oe()}function Yt(t){Ve(t),E.value!==null&&E.value.focus(),y.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Gt(t){Ve(t),re(()=>{y.value=!1})}function Jt(){const t=[k(Dl,{class:`col-auto ${m.fieldClass.value}`,...x.value,for:m.targetUid.value,dark:q.value,square:!0,loading:s.value,itemAligned:!1,filled:!0,stackLabel:S.value.length!==0,...m.splitAttrs.listeners.value,onFocus:Yt,onBlur:Gt},{...n,rawControl:()=>m.getControl(!0),before:void 0,after:void 0})];return u.value===!0&&t.push(k("div",{ref:K,class:M.value+" scroll",style:e.popupContentStyle,...Oe.value,onClick:Be,onScrollPassive:ge},ft())),k(Rl,{ref:L,modelValue:r.value,position:e.useInput===!0?"top":void 0,transitionShow:D,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:ht,onBeforeHide:Zt,onHide:el,onShow:tl},()=>k("div",{class:"q-select__dialog"+(q.value===!0?" q-select__dialog--dark q-dark":"")+(y.value===!0?" q-select__dialog--focused":"")},t))}function Zt(t){gt(t),L.value!==null&&L.value.__updateRefocusTarget(m.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),m.focused.value=!1}function el(t){me(),m.focused.value===!1&&l("blur",t),ke()}function tl(){const t=document.activeElement;(t===null||t.id!==m.targetUid.value)&&E.value!==null&&E.value!==t&&E.value.focus(),oe()}function we(){r.value!==!0&&(g.value=-1,u.value===!0&&(u.value=!1),m.focused.value===!1&&(T!==null&&(clearTimeout(T),T=null),m.innerLoading.value===!0&&(l("filterAbort"),m.innerLoading.value=!1,s.value=!1)))}function Ce(t){m.editable.value===!0&&(a===!0?(m.onControlFocusin(t),r.value=!0,re(()=>{m.focus()})):m.focus(),e.onFilter!==void 0?xe(S.value):(C.value!==!0||n["no-option"]!==void 0)&&(u.value=!0))}function me(){r.value=!1,we()}function ke(){e.useInput===!0&&Me(e.multiple!==!0&&e.fillInput===!0&&f.value.length!==0&&J.value(f.value[0])||"",!0,!0)}function Ue(t){let v=-1;if(t===!0){if(f.value.length!==0){const d=G.value(f.value[0]);v=e.options.findIndex(p=>ze(G.value(p),d))}ie(v)}ye(v)}function ll(t,v){u.value===!0&&m.innerLoading.value===!1&&(ie(-1,!0),re(()=>{u.value===!0&&m.innerLoading.value===!1&&(t>v?ie():Ue(!0))}))}function mt(){r.value===!1&&W.value!==null&&W.value.updatePosition()}function ht(t){t!==void 0&&Ve(t),l("popupShow",t),m.hasPopupOpen=!0,m.onControlFocusin(t)}function gt(t){t!==void 0&&Ve(t),l("popupHide",t),m.hasPopupOpen=!1,m.onControlFocusout(t)}function St(){a=i.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?n["no-option"]!==void 0||e.onFilter!==void 0||C.value===!1:!0),D=i.platform.is.ios===!0&&a===!0&&e.useInput===!0?"fade":e.transitionShow}return Cl(St),kl(mt),St(),He(()=>{w!==null&&clearTimeout(w)}),Object.assign(o,{showPopup:Ce,hidePopup:me,removeAtIndex:Ne,add:ut,toggleOption:ve,getOptionIndex:()=>g.value,setOptionIndex:ye,moveOptionSelection:Re,filter:xe,updateMenuPosition:mt,updateInputValue:Me,isOptionSelected:Qe,getEmittingOptionValue:ot,isOptionDisabled:(...t)=>be.value.apply(null,t)===!0,getOptionValue:(...t)=>G.value.apply(null,t),getOptionLabel:(...t)=>J.value.apply(null,t)}),Object.assign(m,{innerValue:f,fieldClass:h(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:z,targetRef:E,hasValue:B,showPopup:Ce,floatingLabel:h(()=>e.hideSelected!==!0&&B.value===!0||typeof S.value=="number"||S.value.length!==0||bt(e.displayValue)),getControlChild:()=>{if(m.editable.value!==!1&&(r.value===!0||C.value!==!0||n["no-option"]!==void 0))return a===!0?Jt():Qt();m.hasPopupOpen===!0&&(m.hasPopupOpen=!1)},controlEvents:{onFocusin(t){m.onControlFocusin(t)},onFocusout(t){m.onControlFocusout(t,()=>{ke(),we()})},onClick(t){if(Be(t),a!==!0&&u.value===!0){we(),E.value!==null&&E.value.focus();return}Ce(t)}},getControl:t=>{const v=Nt(),d=t===!0||r.value!==!0||a!==!0;if(e.useInput===!0)v.push(jt(t,d));else if(m.editable.value===!0){const H=d===!0?ue.value:void 0;v.push(k("input",{ref:d===!0?E:void 0,key:"d_t",class:"q-select__focus-target",id:d===!0?m.targetUid.value:void 0,value:c.value,readonly:!0,"data-autofocus":t===!0||e.autofocus===!0||void 0,...H,onKeydown:ct,onKeyup:it,onKeypress:st})),d===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&v.push(k("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:rt}))}if(U.value!==void 0&&e.disable!==!0&&Le.value.length!==0){const H=Le.value.map(_=>k("option",{value:_,selected:!0}));v.push(k("select",{class:"hidden",name:U.value,multiple:e.multiple},H))}const p=e.useInput===!0||d!==!0?void 0:m.splitAttrs.attributes.value;return k("div",{class:"q-field__native row items-center",...p,...m.splitAttrs.listeners.value},v)},getInnerAppend:()=>e.loading!==!0&&s.value!==!0&&e.hideDropdownIcon!==!0?[k(_e,{class:"q-select__dropdown-icon"+(u.value===!0?" rotate-180":""),name:Fe.value})]:null}),Tt(m)}});function sn(e,n){const l=F(null),o=h(()=>e.disable===!0?null:k("span",{ref:l,class:"no-outline",tabindex:-1}));function i(u){const r=n.value;u!==void 0&&u.type.indexOf("key")===0?r!==null&&document.activeElement!==r&&r.contains(document.activeElement)===!0&&r.focus():l.value!==null&&(u===void 0||r!==null&&r.contains(u.target)===!0)&&l.value.focus()}return{refocusTargetEl:o,refocusTarget:i}}var cn={xs:30,sm:35,md:40,lg:50,xl:60};const dn={...lt,...Ht,...Bt,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},fn=["update:modelValue"];function vn(e,n){const{props:l,slots:o,emit:i,proxy:u}=Ee(),{$q:r}=u,g=nt(l,r),S=F(null),{refocusTargetEl:y,refocusTarget:s}=sn(l,S),w=Ot(l,cn),A=h(()=>l.val!==void 0&&Array.isArray(l.modelValue)),a=h(()=>{const I=pe(l.val);return A.value===!0?l.modelValue.findIndex(Q=>pe(Q)===I):-1}),b=h(()=>A.value===!0?a.value>-1:pe(l.modelValue)===pe(l.trueValue)),T=h(()=>A.value===!0?a.value===-1:pe(l.modelValue)===pe(l.falseValue)),V=h(()=>b.value===!1&&T.value===!1),D=h(()=>l.disable===!0?-1:l.tabindex||0),P=h(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(l.disable===!0?" disabled":"")+(g.value===!0?` q-${e}--dark`:"")+(l.dense===!0?` q-${e}--dense`:"")+(l.leftLabel===!0?" reverse":"")),O=h(()=>{const I=b.value===!0?"truthy":T.value===!0?"falsy":"indet",Q=l.color!==void 0&&(l.keepColor===!0||(e==="toggle"?b.value===!0:T.value!==!0))?` text-${l.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${I}${Q}`}),z=h(()=>{const I={type:"checkbox"};return l.name!==void 0&&Object.assign(I,{".checked":b.value,"^checked":b.value===!0?"checked":void 0,name:l.name,value:A.value===!0?l.val:l.trueValue}),I}),E=ul(z),W=h(()=>{const I={tabindex:D.value,role:e==="toggle"?"switch":"checkbox","aria-label":l.label,"aria-checked":V.value===!0?"mixed":b.value===!0?"true":"false"};return l.disable===!0&&(I["aria-disabled"]="true"),I});function L(I){I!==void 0&&(ae(I),s(I)),l.disable!==!0&&i("update:modelValue",K(),I)}function K(){if(A.value===!0){if(b.value===!0){const I=l.modelValue.slice();return I.splice(a.value,1),I}return l.modelValue.concat([l.val])}if(b.value===!0){if(l.toggleOrder!=="ft"||l.toggleIndeterminate===!1)return l.falseValue}else if(T.value===!0){if(l.toggleOrder==="ft"||l.toggleIndeterminate===!1)return l.trueValue}else return l.toggleOrder!=="ft"?l.trueValue:l.falseValue;return l.indeterminateValue}function U(I){(I.keyCode===13||I.keyCode===32)&&ae(I)}function Z(I){(I.keyCode===13||I.keyCode===32)&&L(I)}const X=n(b,V);return Object.assign(u,{toggle:L}),()=>{const I=X();l.disable!==!0&&E(I,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const Q=[k("div",{class:O.value,style:w.value,"aria-hidden":"true"},I)];y.value!==null&&Q.push(y.value);const te=l.label!==void 0?Lt(o.default,[l.label]):tt(o.default);return te!==void 0&&Q.push(k("div",{class:`q-${e}__label q-anchor--skip`},te)),k("div",{ref:S,class:P.value,...W.value,onClick:L,onKeydown:U,onKeyup:Z},Q)}}var Vn=Ae({name:"QToggle",props:{...dn,icon:String,iconColor:String},emits:fn,setup(e){function n(l,o){const i=h(()=>(l.value===!0?e.checkedIcon:o.value===!0?e.indeterminateIcon:e.uncheckedIcon)||e.icon),u=h(()=>l.value===!0?e.iconColor:null);return()=>[k("div",{class:"q-toggle__track"}),k("div",{class:"q-toggle__thumb absolute flex flex-center no-wrap"},i.value!==void 0?[k(_e,{name:i.value,color:u.value})]:void 0)]}return vn("toggle",n)}});export{kn as Q,Vn as a};
