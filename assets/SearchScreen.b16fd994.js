import{l as N,m as Q,r as t,o as V,p as o,q as i,af as b,x as h,al as y,s,f as r,t as g,ai as k,aF as C,F as x,ah as L,v as S,Q as $}from"./index.e93ee3cf.js";import{Q as q}from"./QSkeleton.31e066be.js";import{_ as B}from"./ProductList2.64e7e8df.js";import{N as M}from"./NoData.62f04a7f.js";import{D as F}from"./DetailDialog.87ea7ddc.js";import{u as T}from"./globalStore.41c0f409.js";import"./QCarousel.47a6fd35.js";import"./selection.74ed7bcb.js";import"./cart-store.d6442c0c.js";import"./common.eaeaec46.js";const I={class:"favorite-wrapper"},R={class:"q-pa-md col"},j={class:"col q-px-md"},E={class:"col q-px-md"},G=s("div",{class:"text-h5 q-ma-md"},"Search results",-1),U={key:1,class:"q-mt-lg text-center"},z=s("p",{class:"text-center text-h5 q-py-md"},"No Product available.",-1),A={class:"q-pa-md text-center"},oe={__name:"SearchScreen",setup(H){const u=T();N(),Q();const m=t(!1),n=t([]),p=t(1),c=t(1),v=t(!1),f=t(),d=t(),P=a=>{u.openProductDetail(a)},_=async()=>{const a={page:1,search:d.value};try{m.value=!0;const e=await u.fetchProduct(a);n.value=e.data.list,p.value=e.data.total_pages,c.value=e.data.page}finally{m.value=!1}},w=async()=>{const a={page:c.value+1,search:d.value};try{v.value=!0;const e=await u.fetchProduct(a);n.value=n.value.concat(e.data.list),p.value=e.data.total_pages,c.value=e.data.page}finally{v.value=!1}},D=()=>{f.value&&clearTimeout(f.value),f.value=setTimeout(()=>{_()},500)};return V(()=>{_()}),(a,e)=>(o(),i("div",I,[b(u).detailDialog?(o(),h(F,{key:0})):y("",!0),s("div",R,[r(C,{outlined:"",rounded:"",dense:"",placeholder:"Search...",autofocus:"",clearable:"",modelValue:d.value,"onUpdate:modelValue":[e[1]||(e[1]=l=>d.value=l),e[2]||(e[2]=l=>D())],onClear:e[3]||(e[3]=l=>a.$router.push({name:"home"}))},{prepend:g(()=>[r(k,{onClick:e[0]||(e[0]=l=>a.$router.push({name:"home"})),name:"arrow_back"})]),append:g(()=>[r(k,{name:"search"})]),_:1},8,["modelValue"])]),m.value?(o(),i(x,{key:1},L(4,l=>s("div",{class:"col-6 q-mb-md q-px-md q-mt-md flex no-wrap justify-center",key:l},[s("div",j,[r(q,{height:"150px",square:""})]),s("div",E,[r(q,{height:"150px",square:""})])])),64)):(o(),i(x,{key:2},[G,n.value.length?(o(),h(B,{key:0,products:n.value,"onClick:detail":P},null,8,["products"])):(o(),i("div",U,[r(M),z])),s("div",A,[c.value<p.value?(o(),h($,{key:0,class:"full-widh q-px-lg",color:"primary","no-caps":"",outline:"",unelevated:"",rounded:"",loading:v.value,onClick:w},{default:g(()=>[S(" Load More... ")]),_:1},8,["loading"])):y("",!0)])],64))]))}};export{oe as default};
