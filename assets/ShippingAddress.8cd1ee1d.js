import{a as c,Q as b}from"./QCard.d43679d2.js";import{Q}from"./QSeparator.d6c9b124.js";import{Q as n}from"./QInput.94ee58c8.js";import{w as y,r as m,c as A,n as q,t as S,s as o,f as l,q as v,a5 as U,an as w,Q as x,v as B,a4 as N}from"./index.bbb8bb2c.js";import{Q as k}from"./QForm.5a778c70.js";import{Q as C}from"./QCardActions.59b1f795.js";import{Q as P}from"./QDialog.2713c279.js";import{u as F}from"./authStore.7ed643e8.js";const D={class:"text-h5"},L={class:"q-pa-md"},G={__name:"ShippingAddress",props:{modelValue:{type:Boolean,default:!1},isUpdate:{type:Boolean,default:!1},data:{type:Object,default:()=>({})}},emits:["update:model-value"],setup(p,{emit:h}){const s=p,u=F();y(()=>s.modelValue,t=>{t&&s.isUpdate&&(a.value.id=s.data.id,a.value.name=s.data.name,a.value.address_line1=s.data.address_line1,a.value.address_line2=s.data.address_line2,a.value.postal_code=s.data.postal_code,a.value.phone=s.data.phone)});const r=m(),i=m(),a=m({name:"",phone:"",address_line1:"",address_line2:"",postal_code:""}),V=A(()=>s.modelValue),f=t=>{h("update:model-value",t)},_=()=>{i.value.resetValidation()},g=()=>{i.value.validate().then(async t=>{if(t)try{r.value=!0,s.isUpdate?await u.updateAddress(a.value):await u.createAddress(a.value),f(!1)}finally{r.value=!1}})};return(t,d)=>(q(),S(P,{persistent:!N(u).isAddress,position:"bottom","model-value":V.value,"onUpdate:modelValue":f},{default:o(()=>[l(b,null,{default:o(()=>[l(c,null,{default:o(()=>[v("div",D,U(p.isUpdate?"Edit":"Add")+" Shipping Address ",1)]),_:1}),l(Q),l(c,{style:{"max-height":"70vh"},class:"scroll"},{default:o(()=>[l(k,{onSubmit:w(g,["prevent"]),onReset:_,ref_key:"myForm",ref:i},{default:o(()=>[v("div",L,[l(n,{modelValue:a.value.name,"onUpdate:modelValue":d[0]||(d[0]=e=>a.value.name=e),outlined:"",dense:"",placeholder:"Name",class:"q-mb-sm",rules:[e=>e&&e.length>0||"Name is required"]},null,8,["modelValue","rules"]),l(n,{modelValue:a.value.phone,"onUpdate:modelValue":d[1]||(d[1]=e=>a.value.phone=e),outlined:"",dense:"",mask:"##########",prefix:"+91",placeholder:"Phone Number",class:"q-mb-sm",rules:[e=>e&&e.length>0||"Phone number is required",e=>e&&String(e).length==10||"Phone number must be 10 digit."]},null,8,["modelValue","rules"]),l(n,{modelValue:a.value.address_line1,"onUpdate:modelValue":d[2]||(d[2]=e=>a.value.address_line1=e),outlined:"",dense:"",placeholder:"Address Line 1",class:"q-mb-sm",rules:[e=>e&&e.length>0||"Address line 1 is required"]},null,8,["modelValue","rules"]),l(n,{modelValue:a.value.address_line2,"onUpdate:modelValue":d[3]||(d[3]=e=>a.value.address_line2=e),outlined:"",dense:"",placeholder:"Address Line 2",class:"q-mb-sm",rules:[e=>e&&e.length>0||"Address line 2 is required"]},null,8,["modelValue","rules"]),l(n,{modelValue:a.value.postal_code,"onUpdate:modelValue":d[4]||(d[4]=e=>a.value.postal_code=e),outlined:"",dense:"",placeholder:"Postal code",class:"q-mb-sm"},null,8,["modelValue"]),l(x,{class:"full-width q-mt-lg",color:"primary","no-caps":"",unelevated:"",rounded:"",type:"submit",loading:r.value},{default:o(()=>[B(" Save Address ")]),_:1},8,["loading"])])]),_:1},8,["onSubmit"])]),_:1}),l(C)]),_:1})]),_:1},8,["persistent","model-value"]))}};export{G as _};
